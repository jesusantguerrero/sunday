import{E as Le,l as Ee,q as U,m as Pe,x as Ae,j as ge,b as x,o as D,d as o,a as M,f as F,t as A,u as Z,c as W,g as se,F as ie,w as le,h as ve,e as Ne,ap as Re,n as ye,aq as be,Y as X,r as we,v as Ve}from"./app.23df93da.js";import{_ as Be}from"./AppLayout.7c972297.js";import{B as _e,P as We,L as $e,a as Ue,s as je}from"./Viewer.774e4fce.js";import{S as ze}from"./controls.599b6cb0.js";import{J as ke}from"./DialogModal.4185cfca.js";import{J as xe}from"./Button.83f1af01.js";import{a as qe,f as Ce}from"./index.dd8eb344.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./ConfirmationModal.ad50342b.js";import"./Modal.d0dbf6d1.js";import"./DangerButton.f7d0f6ac.js";import"./SecondaryButton.813947c8.js";import"./ItemGroupCell.30edfd52.js";import"./index.502596bc.js";import"./datetime.5a46dae2.js";const Ye="/build/assets/undraw_a_day_at_the_park.31663b51.svg",Ze="/build/assets/undraw_empty.23b3a35d.svg",Xe="/build/assets/undraw_game_day_ucx9.b515c44a.svg";var ce={};(function w(u,a,O,_){var I=!!(u.Worker&&u.Blob&&u.Promise&&u.OffscreenCanvas&&u.OffscreenCanvasRenderingContext2D&&u.HTMLCanvasElement&&u.HTMLCanvasElement.prototype.transferControlToOffscreen&&u.URL&&u.URL.createObjectURL);function L(){}function E(t){var e=a.exports.Promise,c=e!==void 0?e:u.Promise;return typeof c=="function"?new c(t):(t(L,L),null)}var T=function(){var t=Math.floor(16.666666666666668),e,c,i={},h=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(m){var l=Math.random();return i[l]=requestAnimationFrame(function d(g){h===g||h+t-1<g?(h=g,delete i[l],m()):i[l]=requestAnimationFrame(d)}),l},c=function(m){i[m]&&cancelAnimationFrame(i[m])}):(e=function(m){return setTimeout(m,t)},c=function(m){return clearTimeout(m)}),{frame:e,cancel:c}}(),N=function(){var t,e,c={};function i(h){function m(l,d){h.postMessage({options:l||{},callback:d})}h.init=function(d){var g=d.transferControlToOffscreen();h.postMessage({canvas:g},[g])},h.fire=function(d,g,S){if(e)return m(d,null),e;var f=Math.random().toString(36).slice(2);return e=E(function(C){function k(p){p.data.callback===f&&(delete c[f],h.removeEventListener("message",k),e=null,S(),C())}h.addEventListener("message",k),m(d,f),c[f]=k.bind(null,{data:{callback:f}})}),e},h.reset=function(){h.postMessage({reset:!0});for(var d in c)c[d](),delete c[d]}}return function(){if(t)return t;if(!O&&I){var h=["var CONFETTI, SIZE = {}, module = {};","("+w.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{t=new Worker(URL.createObjectURL(new Blob([h])))}catch(m){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("\u{1F38A} Could not load worker",m),null}i(t)}return t}}(),J={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function R(t,e){return e?e(t):t}function H(t){return t!=null}function v(t,e,c){return R(t&&H(t[e])?t[e]:J[e],c)}function G(t){return t<0?0:Math.floor(t)}function K(t,e){return Math.floor(Math.random()*(e-t))+t}function $(t){return parseInt(t,16)}function Q(t){return t.map(j)}function j(t){var e=String(t).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:$(e.substring(0,2)),g:$(e.substring(2,4)),b:$(e.substring(4,6))}}function ee(t){var e=v(t,"origin",Object);return e.x=v(e,"x",Number),e.y=v(e,"y",Number),e}function z(t){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight}function te(t){var e=t.getBoundingClientRect();t.width=e.width,t.height=e.height}function r(t){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=t,e}function n(t,e,c,i,h,m,l,d,g){t.save(),t.translate(e,c),t.rotate(m),t.scale(i,h),t.arc(0,0,1,l,d,g),t.restore()}function b(t){var e=t.angle*(Math.PI/180),c=t.spread*(Math.PI/180);return{x:t.x,y:t.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:t.startVelocity*.5+Math.random()*t.startVelocity,angle2D:-e+(.5*c-Math.random()*c),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:t.color,shape:t.shape,tick:0,totalTicks:t.ticks,decay:t.decay,drift:t.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:t.gravity*3,ovalScalar:.6,scalar:t.scalar}}function y(t,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.wobble+=e.wobbleSpeed,e.velocity*=e.decay,e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble);var c=e.tick++/e.totalTicks,i=e.x+e.random*e.tiltCos,h=e.y+e.random*e.tiltSin,m=e.wobbleX+e.random*e.tiltCos,l=e.wobbleY+e.random*e.tiltSin;if(t.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-c)+")",t.beginPath(),e.shape==="circle")t.ellipse?t.ellipse(e.x,e.y,Math.abs(m-i)*e.ovalScalar,Math.abs(l-h)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):n(t,e.x,e.y,Math.abs(m-i)*e.ovalScalar,Math.abs(l-h)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var d=Math.PI/2*3,g=4*e.scalar,S=8*e.scalar,f=e.x,C=e.y,k=5,p=Math.PI/k;k--;)f=e.x+Math.cos(d)*S,C=e.y+Math.sin(d)*S,t.lineTo(f,C),d+=p,f=e.x+Math.cos(d)*g,C=e.y+Math.sin(d)*g,t.lineTo(f,C),d+=p;else t.moveTo(Math.floor(e.x),Math.floor(e.y)),t.lineTo(Math.floor(e.wobbleX),Math.floor(h)),t.lineTo(Math.floor(m),Math.floor(l)),t.lineTo(Math.floor(i),Math.floor(e.wobbleY));return t.closePath(),t.fill(),e.tick<e.totalTicks}function s(t,e,c,i,h){var m=e.slice(),l=t.getContext("2d"),d,g,S=E(function(f){function C(){d=g=null,l.clearRect(0,0,i.width,i.height),h(),f()}function k(){O&&!(i.width===_.width&&i.height===_.height)&&(i.width=t.width=_.width,i.height=t.height=_.height),!i.width&&!i.height&&(c(t),i.width=t.width,i.height=t.height),l.clearRect(0,0,i.width,i.height),m=m.filter(function(p){return y(l,p)}),m.length?d=T.frame(k):C()}d=T.frame(k),g=C});return{addFettis:function(f){return m=m.concat(f),S},canvas:t,promise:S,reset:function(){d&&T.cancel(d),g&&g()}}}function V(t,e){var c=!t,i=!!v(e||{},"resize"),h=v(e,"disableForReducedMotion",Boolean),m=I&&!!v(e||{},"useWorker"),l=m?N():null,d=c?z:te,g=t&&l?!!t.__confetti_initialized:!1,S=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,f;function C(p,re,ae){for(var B=v(p,"particleCount",G),q=v(p,"angle",Number),Y=v(p,"spread",Number),P=v(p,"startVelocity",Number),Me=v(p,"decay",Number),Se=v(p,"gravity",Number),Ie=v(p,"drift",Number),me=v(p,"colors",Q),Te=v(p,"ticks",Number),he=v(p,"shapes"),De=v(p,"scalar"),fe=ee(p),pe=B,ne=[],Fe=t.width*fe.x,Oe=t.height*fe.y;pe--;)ne.push(b({x:Fe,y:Oe,angle:q,spread:Y,startVelocity:P,color:me[pe%me.length],shape:he[K(0,he.length)],ticks:Te,decay:Me,gravity:Se,drift:Ie,scalar:De}));return f?f.addFettis(ne):(f=s(t,ne,d,re,ae),f.promise)}function k(p){var re=h||v(p,"disableForReducedMotion",Boolean),ae=v(p,"zIndex",Number);if(re&&S)return E(function(P){P()});c&&f?t=f.canvas:c&&!t&&(t=r(ae),document.body.appendChild(t)),i&&!g&&d(t);var B={width:t.width,height:t.height};l&&!g&&l.init(t),g=!0,l&&(t.__confetti_initialized=!0);function q(){if(l){var P={getBoundingClientRect:function(){if(!c)return t.getBoundingClientRect()}};d(P),l.postMessage({resize:{width:P.width,height:P.height}});return}B.width=B.height=null}function Y(){f=null,i&&u.removeEventListener("resize",q),c&&t&&(document.body.removeChild(t),t=null,g=!1)}return i&&u.addEventListener("resize",q,!1),l?l.fire(p,B,Y):C(p,B,Y)}return k.reset=function(){l&&l.reset(),f&&f.reset()},k}var oe;function ue(){return oe||(oe=V(null,{useWorker:!0,resize:!0})),oe}a.exports=function(){return ue().apply(this,arguments)},a.exports.reset=function(){ue().reset()},a.exports.create=V})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ce,!1);const de=ce.exports;ce.exports.create;const Je=w=>{const u=()=>{const _=w*1e3,I=Date.now()+_,L={startVelocity:30,spread:360,ticks:60,zIndex:0};var E=setInterval(()=>{const T=I-Date.now();if(T<=0)return clearInterval(E);const N=50*(T/_);de(Object.assign({},L,{particleCount:N,origin:{x:O(.1,.3),y:Math.random()-.2}})),de(Object.assign({},L,{particleCount:N,origin:{x:O(.7,.9),y:Math.random()-.2}}))},250)};function a(){de({particleCount:100,spread:70,origin:{y:.6}})}function O(_,I){return Math.random()*(I-_)+_}return{fireworks:u,celebrate:a}};const He={class:""},Ge={class:"flex flex-col mx-auto max-w-8xl sm:pr-6 lg:pr-8 md:flex-row"},Ke={class:"pt-12 w-100 md:w-7/12 lg:w-8/12 md:mx-4"},Qe={class:"flex flex-col justify-between mx-2 md:flex-row md:mr-2 md:ml-0"},et=o("span",{class:"pl-2 text-lg font-bold"}," Lineup ",-1),tt={class:"flex items-center"},ot={class:"w-40 mr-2"},rt={slot:"singleLabel","slot-scope":"props"},at={class:"option__title"},nt=o("i",{class:"mr-2 fa fa-briefcase"},null,-1),st={slot:"option","slot-scope":"props"},it={class:"option__desc"},lt={class:"option__title"},dt=o("i",{class:"mr-2 fa fa-briefcase"},null,-1),ct={class:"h-10 bg-purple-700 rounded-lg"},ut=["onClick"],mt=o("div",{class:"w-full mx-auto prose prose-xl text-center"},[o("img",{src:Ye,class:"w-4/12 mx-auto"}),o("p",{class:"mt-4"},"All tasks done. take a rest")],-1),ht={class:"pt-12 w-100 md:w-5/12 lg:w-4/12 md:ml-4"},ft=o("span",{class:"ml-2 text-3xl font-bold"}," Tools ",-1),pt={class:"mt-5 section-card committed"},gt={class:"section-card committed"},vt={class:"flex justify-between font-bold text-white bg-blue-400"},yt=o("span",null," Links ",-1),bt=o("i",{class:"fa fa-plus"},null,-1),wt=[bt],_t={class:"text-gray-600 bg-blue-400 body"},kt={class:"section-card committed"},xt={class:"flex justify-between font-bold text-white bg-blue-400"},Ct=o("span",null," Agenda ",-1),Mt={class:"text-gray-600 bg-blue-400 body"},St={class:"mr-2 font-bold"},It={class:"capitalize"},Tt={class:"checkbox-label"},Dt=["onChange","id","onUpdate:modelValue"],Ft={class:"font-bold"},Ot={class:"prose prose-xl text-center"},Lt=o("div",null,[o("img",{src:Xe,alt:"",class:"w-6/12 mx-auto"})],-1),Et=o("h2",{class:"text-center"},"Welcome to Daily.",-1),Pt=o("div",{class:"mb-5"}," Create tasks, track the time it takes to get it done, link your promodoros and be more productive! ",-1),At={class:"text-center"},Gt={__name:"Dashboard",props:{boards:{type:Array,default(){return[]}},boardTypes:{type:Array,default(){return[]}},boardTemplates:{type:Array,default(){return[]}},todo:{type:[Array,Object],default(){return[]}},agenda:{type:[Array,Object],default(){return[]}},commitDate:{type:String,required:!0},standup:{type:Array,default(){return[]}},links:{type:Array,default(){return[]}},committed:{type:[Array,Object],default(){return[]}},settings:{type:Object,default(){return{}}},user:{type:Object,required:!0}},setup(w){const u=w,a=Le({modes:["inbox","daily"],selectedStage:"",modeSelected:"inbox",timerColor:"bg-red-500",standupSummary:[],localCommitDate:new Date,isLoading:!1,showWelcomeScreen:!1,isStandupOpen:!1,isLinkFormOpen:!1,linkData:{},tracker:null});Ee(a.localCommitDate,(r,n)=>{n&&r.toISOString().slice(0,10)!=n.toISOString().slice(0,10)&&J()}),U(()=>u.todo.filter(r=>r.done).length);const O=U(()=>["daily","inbox"].includes(a.modeSelected)),_=U(()=>["daily","committed"].includes(a.modeSelected)),I=U(()=>be.exports.uniq(u.todo.map(r=>r.stage))),L=U(()=>{const r=a.selectedStage?u.todo.filter(n=>n.stage==a.selectedStage):u.todo.filter(n=>n);return be.exports.orderBy(r,["priority","stage","title"])}),{fireworks:E}=Je();Pe(()=>{!u.standup.length&&u.todo.length&&(a.standupSummary={...u.todo},a.isStandupOpen=!0),a.showWelcomeScreen=!Boolean(Number(u.settings.hide_welcome_screen)),a.showWelcomeScreen&&E()}),T();function T(){let r=new Date;u.commitDate&&(r=u.commitDate.split("-"),r=qe(new Date(r[0],r[1]-1,r[2]))),a.localCommitDate=r}function N(){a.isLoading=!0;const r=Ce(je(new Date,1),"yyyy-MM-dd"),n=Ce(new Date,"yyyy-MM-dd");let b=u.todo.filter(y=>y.done);b=b.map(y=>(y.commit_date=r,y)),b.forEach(async y=>{await R(y)}),H(n),a.isStandupOpen=!1,a.isLoading=!1,X.Inertia.reload({preserveScroll:!0,preserveState:!0})}function J(){const r=`?commit-date=${this.localCommitDate.toISOString().slice(0,10)}`;this.$inertia.replace(`/${r}`,{only:["committed"],preserveScroll:!0,preserveState:!0})}function R(r){const n=r.id?"PUT":"POST",b=r.id?`/${r.id}`:"";axios({url:`/items${b}`,method:n,data:r}).then(()=>{this.$inertia.reload({preserveScroll:!0,preserveState:!0});const y=this.todo.findIndex(s=>r.id==s.id);return this.todo.splice(y,1),r.done&&(this.todo.length?this.celebrate():this.fireworks()),!0})}function H(r){axios({url:"standups",method:"post",data:{date:r}})}function v(){a.linkData={},a.isLinkFormOpen=!1}function G(r){a.linkData=r,a.isLinkFormOpen=!0}function K(){v(),X.Inertia.reload({preserveScroll:!0})}Ae();function $(r){var n;(n=promodoroTimer.value)==null||n.setTask(r)}function Q(){a.tracker=null,axios("/api/items/todos").then(({data:r})=>{a.todo=r})}function j(r,n){const b=a[n].findIndex(y=>y.id==r.id);a[n].splice(b,1)}function ee(){return axios({url:"/api/automations/createTaskFromCalendar/run",method:"POST"}).then(({data:r})=>{r.forEach(n=>{Echo.private(`automations.${n.id}`).listen("AutomationCompleted",b=>{console.log(b),this.$notify({type:"success",title:"Automation Completed",message:"Updated"}),X.Inertia.reload({preserveScroll:!0})})})})}function z(){axios({url:"/api/settings",method:"POST",data:{hide_welcome_screen:!0}}).then(({data:r})=>{a.showWelcomeScreen=!1,X.Inertia.reload({preserveScroll:!0})})}function te(){}return(r,n)=>{const b=we("multiselect"),y=we("inertia-link");return D(),ge(Be,{boards:w.boards},{default:x(()=>[o("div",He,[o("div",Ge,[o("div",Ke,[o("div",Qe,[et,o("div",tt,[o("div",ot,[M(b,{modelValue:a.selectedStage,"onUpdate:modelValue":n[0]||(n[0]=s=>a.selectedStage=s),ref:"input",placeholder:"Filter by stage",class:"w-full","show-labels":!1,options:Z(I)},{default:x(()=>[o("template",rt,[o("span",at,[nt,F(" "+A(u.option),1)])]),o("template",st,[o("div",it,[o("span",lt,[dt,F(" "+A(u.option),1)])])])]),_:1},8,["modelValue","options"])]),o("div",ct,[(D(!0),W(ie,null,se(a.modes,s=>(D(),W("button",{key:s,onClick:V=>a.modeSelected=s,class:ye([{"bg-purple-400":s==a.modeSelected},"h-full px-8 text-white capitalize rounded-lg"])},A(s),11,ut))),128))])])]),le(M(_e,{title:"Commited",tasks:w.committed,onItemDeleted:n[2]||(n[2]=s=>j(s,"committed")),onUpdateItem:R},{default:x(()=>[o("template",null,[r.localCommitDate?(D(),ge(ze,{key:0,modelValue:r.localCommitDate,"onUpdate:modelValue":n[1]||(n[1]=s=>r.localCommitDate=s)},null,8,["modelValue"])):Ne("",!0)])]),_:1},8,["tasks"]),[[ve,Z(_)]]),le(M(_e,{title:"To Do","allow-add":!0,boards:w.boards,tasks:Z(L),tracker:r.tracker,onUpdateItem:R,onItemDeleted:n[3]||(n[3]=s=>j(s,"todo")),onItemClicked:$},Re({_:2},[w.committed.length?{name:"empty",fn:x(()=>[mt]),key:"0"}:{name:"empty",fn:x(()=>[o("div",{class:"w-full mx-auto prose prose-xl text-center"},[o("img",{src:Ze,class:"w-4/12 mx-auto"}),o("small",{class:"mt-4 text-gray-400"},[F(" Nothing to do. Add new tasks from here or mark in your "),o("a",{href:"#",onClick:te},"boards"),F(" as todo")])])]),key:"1"}]),1032,["boards","tasks","tracker"]),[[ve,Z(O)]])]),o("div",ht,[ft,o("div",pt,[o("div",{class:ye([a.timerColor,"text-gray-600 font-bold px-0"])},[M(We,{ref:"Promodoro",settings:w.settings,tasks:a.todo,tracker:r.tracker,"onUpdate:tracker":n[4]||(n[4]=s=>r.tracker=s),timerColor:a.timerColor,"onUpdate:timerColor":n[5]||(n[5]=s=>a.timerColor=s),onStopped:Q},null,8,["settings","tasks","tracker","timerColor"])],2)]),o("div",gt,[o("header",vt,[yt,o("button",{class:"text-white bg-transparent",onClick:n[6]||(n[6]=s=>a.isLinkFormOpen=!a.isLinkFormOpen)},wt)]),o("div",_t,[M($e,{links:w.links,onEdit:G},null,8,["links"])])]),o("div",kt,[o("header",xt,[Ct,o("div",null,[o("i",{class:"inline-block ml-4 cursor-pointer fa fa-robot",onClick:ee}),M(y,{class:"text-white bg-transparent",href:"/planner"},{default:x(()=>[F(" Go to Planner ")]),_:1})])]),o("div",Mt,[(D(!0),W(ie,null,se(w.agenda,s=>(D(),W("div",{class:"p-2 text-white rounded-md cursor-pointer hover:bg-blue-500",key:`event-${s.id}`},[o("span",St,A(s.time),1),o("span",It,A(s.title),1)]))),128))])])])]),M(ke,{show:a.isStandupOpen,onClose:n[8]||(n[8]=s=>r.isStandupOpen=!1)},{title:x(()=>[F(" Today's Standup ")]),content:x(()=>[o("div",null,[(D(!0),W(ie,null,se(a.standupSummary,s=>(D(),W("p",{key:`task-${s.id}`},[o("label",Tt,[le(o("input",{type:"checkbox",onChange:V=>R(s),name:"",id:s.id,"onUpdate:modelValue":V=>s.done=V},null,40,Dt),[[Ve,s.done]]),o("span",Ft," ["+A(s.stage)+"] ",1),o("span",null,A(s.title),1)])]))),128))])]),footer:x(()=>[M(xe,{onClick:n[7]||(n[7]=s=>N())},{default:x(()=>[F(" Complete Day ")]),_:1})]),_:1},8,["show"]),M(ke,{show:a.showWelcomeScreen,onClose:z},{content:x(()=>[o("div",Ot,[Lt,Et,Pt,o("div",At,[M(xe,{onClick:n[9]||(n[9]=s=>z())},{default:x(()=>[F(" Let's start! ")]),_:1})])])]),_:1},8,["show"]),M(Ue,{"record-data":a.linkData,"is-open":a.isLinkFormOpen,onSaved:K,onCancel:n[10]||(n[10]=s=>a.isLinkFormOpen=!1)},null,8,["record-data","is-open"])])]),_:1},8,["boards"])}}};export{Gt as default};

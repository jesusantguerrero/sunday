import{_ as v}from"./AppLayout.7c972297.js";import{A as w}from"./AutomationModal.0a34d22b.js";import{j as y,b as A,r as f,o as r,d as t,c as l,g as p,F as u,a as b,t as c,f as C}from"./app.23df93da.js";import{_ as k}from"./_plugin-vue_export-helper.cdc0426e.js";import"./ConfirmationModal.ad50342b.js";import"./Modal.d0dbf6d1.js";import"./DangerButton.f7d0f6ac.js";import"./SecondaryButton.813947c8.js";import"./DialogModal.4185cfca.js";import"./Button.83f1af01.js";function _(o){this.message=o}_.prototype=new Error,_.prototype.name="InvalidCharacterError";typeof window<"u"&&window.atob&&window.atob.bind(window);function g(o){this.message=o}g.prototype=new Error,g.prototype.name="InvalidTokenError";const I={name:"Integrations",components:{AppLayout:v,AutomationModal:w},props:{boards:{type:Array,default(){return[]}},services:{type:Array,default(){return[]}},integrations:{type:Array,default(){return[]}}},data(){return{searchOptions:{},showAddConnection:!1,authInstance:null,isAutomationModalOpen:!1,openedAutomation:{}}},methods:{toggleAppConnection(){this.showAddConnection=!this.showAddConnection},openAutomationModal(o,a){this.isAutomationModalOpen=!0,this.openedAutomation={board:o,stage:a}},onItemSaved(){this.$nextTick(()=>{this.isAutomationModalOpen=!1,this.$inertia.reload("/integrations",{only:["integrations"],preserveState:!0})})},handleCommand(o){switch(o.name.toLowerCase()){case"google":case"gmail":case"calendar":this.google(o.name.toLowerCase(),o);break}},async google(){const o=this.services.find(n=>n.name="Google"),a={service_id:o.id,service_name:o.name};axios({url:"/services/google",method:"post",data:{credentials:a}}).then(({data:n})=>{location.href=n})}}},M={class:""},S={class:"flex flex-col mx-auto max-w-8xl sm:pr-6 lg:pr-8 md:flex-row"},O={class:"pt-12 w-100 md:w-full lg:w-8/12 md:mx-4"},E={class:"flex mr-2"},B=t("span",{class:"text-3xl font-bold"}," Integrations ",-1),L={class:"py-12"},T={class:"mx-auto max-w-8xl sm:px-6 lg:px-8"},N={class:"flex w-full apps-form"},V=["onClick"],F=["src"],j={class:"mt-2 font-bold"},D={class:"w-full integrations-form"},G={class:"left"},R={class:"head"},q={class:"tagline text-gray-400"},z={class:"text-right automations"},H=t("div",{class:"text-right options"}," options ",-1);function J(o,a,n,s,i,d){const m=f("automation-modal"),x=f("app-layout");return r(),y(x,{boards:n.boards},{default:A(()=>[t("div",M,[t("div",S,[t("div",O,[t("div",E,[B,t("button",{class:"px-5 ml-2 font-bold text-white bg-purple-400 rounded-lg btn",onClick:a[0]||(a[0]=(...e)=>d.openAutomationModal&&d.openAutomationModal(...e))}," Add Automation ")])])]),t("div",L,[t("div",T,[t("div",N,[(r(!0),l(u,null,p(n.services,e=>(r(),l("div",{class:"m-2 app-service__integration",onClick:h=>d.handleCommand(e),ref_for:!0,ref:e.name,key:e.id},[t("img",{src:e.logo,alt:"",style:{width:"50px",height:"50px"}},null,8,F),t("p",j,c(e.name),1)],8,V))),128))]),t("div",D,[(r(!0),l(u,null,p(n.integrations,e=>(r(),l("div",{class:"grid grid-cols-3 px-5 py-3 my-2 font-bold text-gray-500 bg-white cursor-pointer app-service__item",key:e.id,ref_for:!0,ref:"service.name"},[t("div",G,[t("div",R,c(e.name)+" "+c(e.hash),1),t("div",q,[C(" Rules: "),(r(!0),l(u,null,p(e.automations,h=>(r(),l("span",null,c(h.name),1))),256))])]),t("div",z,c(e.automations.length),1),H]))),128))])])]),b(m,{onCancel:a[1]||(a[1]=e=>i.isAutomationModalOpen=!1),onSaved:d.onItemSaved,boards:n.boards,type:"event","record-data":i.openedAutomation,"is-open":i.isAutomationModalOpen},null,8,["onSaved","boards","record-data","is-open"])])]),_:1},8,["boards"])}const ot=k(I,[["render",J]]);export{ot as default};

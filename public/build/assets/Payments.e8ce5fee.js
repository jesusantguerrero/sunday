import{_ as g}from"./AppLayout.7c972297.js";import{J as x}from"./SectionBorder.d8447cfe.js";import{D as S,a as P,b as D}from"./DataBillingCard.daf811aa.js";import{_ as k}from"./_plugin-vue_export-helper.cdc0426e.js";import{f as b}from"./index.dd8eb344.js";import{j as r,b as m,r as a,o as i,d as s,c as o,g as c,F as u,a as C}from"./app.23df93da.js";import"./ConfirmationModal.ad50342b.js";import"./Modal.d0dbf6d1.js";import"./DangerButton.f7d0f6ac.js";import"./SecondaryButton.813947c8.js";import"./DialogModal.4185cfca.js";import"./Button.83f1af01.js";const B={props:["sessions","plans","subscriptions"],components:{AppLayout:g,JetSectionBorder:x,DataCard:S,DataPlanCard:P,DataBillingCard:D},computed:{visibleSubscriptions(){return this.subscriptions.filter(t=>t.status.toLowerCase()!="cancelled")},cards(){return[{title:"Current Monthly Bill",value:this.pendingBalance,links:[{label:"Payment Details",type:"inertia",ref:"/user/billing/current"}]},{title:"Next Payment Due",value:this.nextPaymentDate,links:[{label:"View payment history",type:"inertia",ref:"/user/billing/current"}]},{title:"Last Payment",value:this.lastPayment,links:[]},{title:"Payment Information",value:this.lastPaymentDate,links:[{label:"Redeem coupon",type:"inertia",ref:"/user/billing/current"}]}]},details(){return this.visibleSubscriptions.length&&this.visibleSubscriptions[0]},pendingBalance(){if(this.details){const t=JSON.parse(this.details.next_payment);return t.currency_code+" "+t.value}return 0},lastPayment(){if(this.details){const t=JSON.parse(this.details.last_payment);return t.amount.currency_code+" "+t.amount.value}return"-"},nextPaymentDate(){return this.details?b(new Date(this.details.next_billing_date),"MMM dd, yyyy"):0},lastPaymentDate(){return this.details?b(new Date(this.details.last_payment_date),"MMM dd, yyyy"):"-"}},methods:{sendSubscriptionAction(t,d){const l=`/v2/subscriptions/${t.id}/agreement/${t.agreement_id}/${d}`;axios.post(l).then(()=>{this.$inertia.reload()})},isCurrentPlan(t){return console.log(this.visibleSubscriptions[0].quantity,t.quantity),this.visibleSubscriptions.length&&this.visibleSubscriptions[0].quantity==t.quantity},getLabelSubscribe(t){return this.isBigger(t)?"Upgrade":"Downgrade"},isBigger(t){return this.visibleSubscriptions.length&&this.visibleSubscriptions[0].quantity<t.quantity}}},w=s("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Profile ",-1),M={class:"py-10 mx-auto max-w-8xl sm:px-6 lg:px-8"},q={class:"flex mb-10 plans__info"},L={class:"mb-10 subscriptions__container"},A=s("h4",{class:"mx-2 mb-2 text-3xl font-bold"},"Current Plan",-1),N={class:"mt-5 plans__container"},$=s("h4",{class:"mx-2 mb-2 text-3xl font-bold"},"Plans",-1),j={class:"flex justify-between"},J=s("div",{id:"paypal-button-container"},null,-1);function R(t,d,l,V,F,n){const _=a("data-card"),y=a("data-plan-card"),h=a("data-billing-card"),f=a("jet-section-border"),v=a("app-layout");return i(),r(v,null,{header:m(()=>[w]),default:m(()=>[s("div",null,[s("div",M,[s("div",q,[(i(!0),o(u,null,c(n.cards,e=>(i(),r(_,{key:e.title,info:e},null,8,["info"]))),128))]),s("div",L,[A,(i(!0),o(u,null,c(n.visibleSubscriptions,e=>(i(),r(y,{key:e.id,plan:e,onSuspend:p=>n.sendSubscriptionAction(e,"suspend"),onReactivate:p=>n.sendSubscriptionAction(e,"reactivate"),onCancel:p=>n.sendSubscriptionAction(e,"cancel")},null,8,["plan","onSuspend","onReactivate","onCancel"]))),128))]),s("div",N,[$,s("div",j,[(i(!0),o(u,null,c(l.plans,e=>(i(),r(h,{key:e.id,plan:e,"is-current":n.isCurrentPlan(e),"subscribe-link":`/subscriptions/${e.paypal_plan_id}/subscribe`,"subscribe-label":n.getLabelSubscribe(e)},null,8,["plan","is-current","subscribe-link","subscribe-label"]))),128))])]),J,C(f)])])]),_:1})}const Y=k(B,[["render",R]]);export{Y as default};

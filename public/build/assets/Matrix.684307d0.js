import{_ as M,a6 as U}from"./AppLayout.7c972297.js";import{B as j,P as A,a as P,L as E,s as J}from"./Viewer.774e4fce.js";import{S as N}from"./controls.599b6cb0.js";import{S as q}from"./index.f419c8c4.js";import{J as z}from"./DialogModal.4185cfca.js";import{J as G}from"./Button.83f1af01.js";import{aq as k,j as x,b as d,r as a,o as m,d as t,a as r,f as _,t as p,c as u,g as f,F as y,w as g,h as w,e as H,n as S,v as K}from"./app.23df93da.js";import{_ as Q}from"./_plugin-vue_export-helper.cdc0426e.js";import{a as R,f as v}from"./index.dd8eb344.js";import"./ConfirmationModal.ad50342b.js";import"./Modal.d0dbf6d1.js";import"./DangerButton.f7d0f6ac.js";import"./SecondaryButton.813947c8.js";import"./ItemGroupCell.30edfd52.js";import"./index.502596bc.js";import"./datetime.5a46dae2.js";import"./index.f76ad5d2.js";const W={components:{AppLayout:M,BoardSide:U,BoardItemContainer:j,ScheduleView:q,Promodoro:A,DialogModal:z,LinkFormModal:P,LinkViewer:E,PrimaryButton:G,ScheduleControls:N},props:{boards:{type:Array,default(){return[]}},todo:{type:[Array,Object],default(){return[]}},agenda:{type:[Array,Object],default(){return[]}},commitDate:{type:String,required:!0},standup:{type:Array,default(){return[]}},links:{type:Array,default(){return[]}},committed:{type:[Array,Object],default(){return[]}},settings:{type:Object,default(){return{}}}},data(){return{modes:["committed","done","scheduled","delegated","deleted","backlog"],selectedStage:"",modeSelected:"inbox",promodoroColor:"red",standupSummary:[],localCommitDate:new Date,isLoading:!1,isStandupOpen:!1,isLinkFormOpen:!1,linkData:{},tracker:null}},watch:{localCommitDate(e,s){s&&e.toISOString().slice(0,10)!=s.toISOString().slice(0,10)&&this.getCommitsByDate()}},computed:{hasCommited(){return this.todo.filter(e=>e.done).length},showTodo(){return["all","inbox"].includes(this.modeSelected)},showCommitted(){return["all","committed"].includes(this.modeSelected)},stages(){return k.exports.uniq(this.todo.map(e=>e.stage))},inbox(){const e=this.selectedStage?this.todo.filter(s=>s.stage==this.selectedStage):this.todo;return k.exports.orderBy(e,["priority","stage","title"])}},mounted(){!this.standup.length&&this.todo.length&&(this.standupSummary={...this.todo},this.isStandupOpen=!0)},created(){this.setCommitDate()},methods:{setCommitDate(){let e=new Date;this.commitDate&&(e=this.commitDate.split("-"),e=R(new Date(e[0],e[1]-1,e[2]))),this.localCommitDate=e},completeDay(){this.isLoading=!0;const e=v(J(new Date,1),"yyyy-MM-dd"),s=v(new Date,"yyyy-MM-dd");let i=this.todo.filter(c=>c.done);i=i.map(c=>(c.commit_date=e,c)),i.forEach(async c=>{await this.updateItem(c)}),this.updateDaily(s),this.isStandupOpen=!1,this.isLoading=!1,this.$inertia.reload({preserveScroll:!0})},getCommitsByDate(){const e=`?commit-date=${this.localCommitDate.toISOString().slice(0,10)}`;this.$inertia.get(`/${e}`,{only:["committed"],preserveState:!0})},updateItem(e){const s=e.id?"PUT":"POST",i=e.id?`/${e.id}`:"";axios({url:`/items${i}`,method:s,data:e}).then(()=>(this.$inertia.reload({preserveScroll:!0}),!0))},updateDaily(e){axios({url:"standups",method:"post",data:{date:e}})},closeLinkForm(){this.linkData={},this.isLinkFormOpen=!1},openLinkForm(e){this.linkData=e,this.isLinkFormOpen=!0},onLinkSaved(){this.closeLinkForm(),this.$inertia.reload({preserveScroll:!0})},setTaskToTimer(e){this.$refs.Promodoro.setTask(e)}}},X={class:""},Y={class:"flex flex-col mx-auto max-w-8xl sm:pr-6 lg:pr-8 md:flex-row"},Z={class:"pt-12 w-100 md:w-7/12 lg:w-8/12 md:mx-4"},$={class:"flex flex-col justify-between mx-2 md:flex-row md:mr-2 md:ml-0"},tt=t("span",{class:"text-3xl font-bold"}," Today's Todos ",-1),et={class:"flex items-center"},ot={class:"w-40 mr-2"},st={slot:"singleLabel","slot-scope":"props"},nt={class:"option__title"},it=t("i",{class:"mr-2 fa fa-briefcase"},null,-1),lt={slot:"option","slot-scope":"props"},at={class:"option__desc"},rt={class:"option__title"},dt=t("i",{class:"mr-2 fa fa-briefcase"},null,-1),mt={class:"h-10 bg-purple-700 rounded-lg controls"},ct=["onClick"],pt={class:"pt-12 w-100 md:w-5/12 lg:w-4/12 md:ml-4"},ut=t("span",{class:"ml-2 text-3xl font-bold"}," Tools ",-1),_t={class:"mt-5 section-card committed"},ht={class:"section-card committed"},ft={class:"flex justify-between font-bold text-white bg-blue-400"},yt=t("span",null," Links ",-1),gt=t("i",{class:"fa fa-plus"},null,-1),bt=[gt],kt={class:"text-gray-600 bg-blue-400 body"},xt={class:"section-card committed"},wt={class:"flex justify-between font-bold text-white bg-blue-400"},St=t("span",null," Agenda ",-1),vt={class:"text-gray-600 bg-blue-400 body"},Ct={class:"mr-2 font-bold"},Dt={class:"capitalize"},Lt={class:"checkbox-label"},Ot=["onChange","id","onUpdate:modelValue"],Tt={class:"font-bold"};function Ft(e,s,i,c,n,l){const C=a("multiselect"),D=a("schedule-controls"),b=a("board-item-container"),L=a("promodoro"),O=a("link-viewer"),T=a("inertia-link"),F=a("primary-button"),I=a("dialog-modal"),V=a("link-form-modal"),B=a("app-layout");return m(),x(B,{boards:i.boards},{default:d(()=>[t("div",X,[t("div",Y,[t("div",Z,[t("div",$,[tt,t("div",et,[t("div",ot,[r(C,{modelValue:n.selectedStage,"onUpdate:modelValue":s[0]||(s[0]=o=>n.selectedStage=o),ref:"input","show-labels":!1,placeholder:"Filter by stage",options:l.stages,class:"w-full"},{default:d(()=>[t("template",st,[t("span",nt,[it,_(" "+p(e.props.option),1)])]),t("template",lt,[t("div",at,[t("span",rt,[dt,_(" "+p(e.props.option),1)])])])]),_:1},8,["modelValue","options"])]),t("div",mt,[(m(!0),u(y,null,f(n.modes,o=>(m(),u("button",{key:o,onClick:h=>n.modeSelected=o,class:S([{"bg-purple-400":o==n.modeSelected},"h-full px-8 text-white capitalize rounded-lg"])},p(o),11,ct))),128))])])]),g(r(b,{title:"Commited",tasks:i.committed,onUpdateItem:l.updateItem},{default:d(()=>[t("template",null,[n.localCommitDate?(m(),x(D,{key:0,modelValue:n.localCommitDate,"onUpdate:modelValue":s[1]||(s[1]=o=>n.localCommitDate=o)},null,8,["modelValue"])):H("",!0)])]),_:1},8,["tasks","onUpdateItem"]),[[w,l.showCommitted]]),g(r(b,{title:"To Do",tasks:l.inbox,tracker:n.tracker,onUpdateItem:l.updateItem,onItemClicked:l.setTaskToTimer},null,8,["tasks","tracker","onUpdateItem","onItemClicked"]),[[w,l.showTodo]])]),t("div",pt,[ut,t("div",_t,[t("div",{class:S(`bg-${n.promodoroColor}-400 text-gray-600 font-bold px-0`)},[r(L,{ref:"Promodoro",settings:i.settings,tracker:n.tracker,"timer-color":n.promodoroColor,tasks:i.todo},null,8,["settings","tracker","timer-color","tasks"])],2)]),t("div",ht,[t("header",ft,[yt,t("button",{class:"text-white bg-transparent",onClick:s[2]||(s[2]=o=>n.isLinkFormOpen=!n.isLinkFormOpen)},bt)]),t("div",kt,[r(O,{links:i.links,onEdit:l.openLinkForm},null,8,["links","onEdit"])])]),t("div",xt,[t("header",wt,[St,r(T,{class:"text-white bg-transparent",href:"/planner"},{default:d(()=>[_(" Go to Planner ")]),_:1})]),t("div",vt,[(m(!0),u(y,null,f(i.agenda,o=>(m(),u("div",{class:"p-2 text-white rounded-md cursor-pointer hover:bg-blue-500",key:`event-${o.id}`},[t("span",Ct,p(o.time),1),t("span",Dt,p(o.title),1)]))),128))])])])]),r(I,{show:n.isStandupOpen,onClose:s[4]||(s[4]=o=>n.isStandupOpen=!1)},{title:d(()=>[_(" Today's Standup ")]),content:d(()=>[t("div",null,[(m(!0),u(y,null,f(n.standupSummary,o=>(m(),u("p",{key:`task-${o.id}`},[t("label",Lt,[g(t("input",{type:"checkbox",onChange:h=>l.updateItem(o),name:"",id:o.id,"onUpdate:modelValue":h=>o.done=h},null,40,Ot),[[K,o.done]]),t("span",Tt," ["+p(o.stage)+"] ",1),t("span",null,p(o.title),1)])]))),128))])]),footer:d(()=>[r(F,{onClick:s[3]||(s[3]=o=>l.completeDay())},{default:d(()=>[_(" Complete Day ")]),_:1})]),_:1},8,["show"]),r(V,{"record-data":n.linkData,"is-open":n.isLinkFormOpen,onSaved:l.onLinkSaved,onCancel:s[5]||(s[5]=o=>n.isLinkFormOpen=!1)},null,8,["record-data","is-open","onSaved"])])]),_:1},8,["boards"])}const Rt=Q(W,[["render",Ft]]);export{Rt as default};

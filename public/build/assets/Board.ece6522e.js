import{N as Ct,J as ze,a as zt,_ as kr}from"./AppLayout.7c972297.js";import{B as xr,m as we,L as $e,a7 as _r,a8 as Sr,x as A,l as X,u as T,r as K,o as w,j as Y,b as I,d as f,i as ye,w as re,X as le,V as be,a as R,n as L,t as B,e as j,c as $,Z as et,_ as tt,v as Fe,f as te,q as N,F as Z,g as ee,Q as Tr,a9 as Et,E as ie,$ as ue,k as J,Y as me,aa as $r,a3 as Mr,p as Or,ab as Cr,a5 as Er,ac as Dt,ad as Nn,ae as Te,af as He,ag as jn,ah as qt,ai as Dr,aj as he,z as It,K as Un,ak as ce,al as Ir,am as Ar,an as Yt,ao as Pr,h as Bn,ap as Qt,I as Lr,aq as Rr,ar as Nr}from"./app.23df93da.js";import{V as nt,I as jr}from"./ItemModal.4765260f.js";import{i as Ur,a as Br,I as At,c as Fr,_ as Hr,f as Vr}from"./ItemGroupCell.30edfd52.js";import{a as Wr,b as zr,c as qr}from"./atmosphere-ui.es.b60be143.js";import{_ as Me}from"./_plugin-vue_export-helper.cdc0426e.js";import{D as Gt,a as Yr}from"./datetime.5a46dae2.js";import{r as Oe,t as Fn,a as dt,g as Hn,b as Qe,d as Qr,s as Kt,f as Ye,i as Gr}from"./index.dd8eb344.js";import{i as Kr}from"./index.f76ad5d2.js";import{s as Xt,i as Xr}from"./index.502596bc.js";import{A as Jr}from"./AutomationModal.0a34d22b.js";import{B as Zr}from"./BulkSelectionBar.fb89f9d9.js";import"./ConfirmationModal.ad50342b.js";import"./Modal.d0dbf6d1.js";import"./DangerButton.f7d0f6ac.js";import"./SecondaryButton.813947c8.js";import"./DialogModal.4185cfca.js";import"./Button.83f1af01.js";function Jt(e,t){var n,r,a,s,i,o,l,u;Oe(1,arguments);var d=Hn(),h=Fn((n=(r=(a=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(i=t.locale)===null||i===void 0||(o=i.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=dt(e),p=v.getDay(),k=(p<h?7:0)+p-h;return v.setDate(v.getDate()-k),v.setHours(0,0,0,0),v}var ea=864e5;function Vn(e,t){Oe(2,arguments);var n=Xt(e),r=Xt(t),a=n.getTime()-Qe(n),s=r.getTime()-Qe(r);return Math.round((a-s)/ea)}function ta(e,t,n){var r,a,s,i,o,l,u,d,h,v;Oe(2,arguments);var p=dt(e),k=dt(t),S=Hn(),O=(r=(a=n==null?void 0:n.locale)!==null&&a!==void 0?a:S.locale)!==null&&r!==void 0?r:Qr,P=Fn((s=(i=(o=(l=n==null?void 0:n.weekStartsOn)!==null&&l!==void 0?l:n==null||(u=n.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&o!==void 0?o:S.weekStartsOn)!==null&&i!==void 0?i:(h=S.locale)===null||h===void 0||(v=h.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&s!==void 0?s:0);if(!O.localize)throw new RangeError("locale must contain localize property");if(!O.formatLong)throw new RangeError("locale must contain formatLong property");if(!O.formatRelative)throw new RangeError("locale must contain formatRelative property");var F=Vn(p,k);if(isNaN(F))throw new RangeError("Invalid time value");var D;F<-6?D="other":F<-1?D="lastWeek":F<0?D="yesterday":F<1?D="today":F<2?D="tomorrow":F<7?D="nextWeek":D="other";var V=Kt(p,Qe(p)),W=Kt(k,Qe(k)),H=O.formatRelative(D,V,W,{locale:O,weekStartsOn:P});return Ye(p,H,{locale:O,weekStartsOn:P})}function na(e,t,n){Oe(2,arguments);var r=Jt(e,n),a=Jt(t,n);return r.getTime()===a.getTime()}function Zt(e,t){return Oe(1,arguments),na(e,Date.now(),t)}function ra(e){return Oe(1,arguments),Ur(e,Date.now())}function aa(e){return Oe(1,arguments),Xr(e,Br(Date.now(),1))}var en;const Ve=typeof window<"u",sa=e=>typeof e=="string",ot=()=>{};Ve&&((en=window==null?void 0:window.navigator)==null?void 0:en.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function oa(e){return _r()?(Sr(e),!0):!1}function ia(e,t=!0){xr()?we(e):t?e():$e(e)}function Ue(e){var t;const n=T(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Pt=Ve?window:void 0;Ve&&window.document;Ve&&window.navigator;Ve&&window.location;function De(...e){let t,n,r,a;if(sa(e[0])?([n,r,a]=e,t=Pt):[t,n,r,a]=e,!t)return ot;let s=ot;const i=X(()=>Ue(t),l=>{s(),l&&(l.addEventListener(n,r,a),s=()=>{l.removeEventListener(n,r,a),s=ot})},{immediate:!0,flush:"post"}),o=()=>{i(),s()};return oa(o),o}function la(e,t,n={}){const{window:r=Pt,ignore:a,capture:s=!0,detectIframe:i=!1}=n;if(!r)return;const o=A(!0);let l;const u=v=>{r.clearTimeout(l);const p=Ue(e),k=v.composedPath();!p||p===v.target||k.includes(p)||!o.value||a&&a.length>0&&a.some(S=>{const O=Ue(S);return O&&(v.target===O||k.includes(O))})||t(v)},d=[De(r,"click",u,{passive:!0,capture:s}),De(r,"pointerdown",v=>{const p=Ue(e);o.value=!!p&&!v.composedPath().includes(p)},{passive:!0}),De(r,"pointerup",v=>{if(v.button===0){const p=v.composedPath();v.composedPath=()=>p,l=r.setTimeout(()=>u(v),50)}},{passive:!0}),i&&De(r,"blur",v=>{var p;const k=Ue(e);((p=document.activeElement)==null?void 0:p.tagName)==="IFRAME"&&!(k!=null&&k.contains(document.activeElement))&&t(v)})].filter(Boolean);return()=>d.forEach(v=>v())}const ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ft="__vueuse_ssr_handlers__";ct[ft]=ct[ft]||{};ct[ft];var tn;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(tn||(tn={}));function ua(e={}){const{window:t=Pt,initialWidth:n=1/0,initialHeight:r=1/0,listenOrientation:a=!0}=e,s=A(n),i=A(r),o=()=>{t&&(s.value=t.innerWidth,i.value=t.innerHeight)};return o(),ia(o),De("resize",o,{passive:!0}),a&&De("orientationchange",o,{passive:!0}),{width:s,height:i}}const Lt=e=>(et("data-v-30a949b3"),e=e(),tt(),e),da={slot:"reference"},ca=Lt(()=>f("i",{class:"fa fa-plus"},null,-1)),fa={class:"field-popover"},ma={class:"options-list"},ha={class:"option-list__item"},va=Lt(()=>f("button",{class:"option-list__button"},"Clear sort",-1)),ga=[va],pa=Lt(()=>f("li",{class:"option-list__item"},[f("button",{class:"option-list__button"},"Duplicate")],-1)),ya={key:0,class:"option-list__item"},ba={class:"option-list__item"},wa={__name:"FieldPopover",props:{fieldData:{type:Object,required:!0},board:{type:Object,required:!0}},emits:["saved"],setup(e,{emit:t}){const n=e,r=A({});X(n.fieldData,()=>{r.value={...n.fieldData},r.value.type&&(r.value.type="text")},{immediate:!0});const a=[{name:"text",icon:"fa fa-align-left",title:"Text"},{name:"date",icon:"far fa-calendar-alt",title:"Date"},{name:"time",icon:"far fa-clock",title:"Time"},{name:"number",icon:"fa fa-hashtag",title:"Number"},{name:"label",icon:"fa fa-tags",title:"Selects"},{name:"person",icon:"fa fa-user-friends",title:"Person"}];function s(){var d;const o={board_id:n.board.id,name:r.value.name||r.value.title||`field_${n.board.fields.length}`,title:r.value.title||r.value.name,type:(d=r.value.type)==null?void 0:d.name,manual:r.value.manual||!0};let l="POST",u="/api/fields";n.fieldData.id&&(l="put",u+=`/${n.fieldData.id}`),axios({url:u,method:l,data:o}).then(()=>{t("saved")})}function i(){axios({url:`/api/fields/${r.value.id}`,method:"delete"}).then(()=>{t("saved")})}return(o,l)=>{const u=K("multiselect");return w(),Y(T(Ct),{placement:"bottom",width:"200",trigger:"click"},{trigger:I(()=>[f("button",da,[ye(o.$slots,"default",{},()=>[ca],!0)])]),default:I(()=>[f("div",fa,[re(f("input",{type:"text",class:"form-control","onUpdate:modelValue":l[0]||(l[0]=d=>r.value.title=d),onKeydown:l[1]||(l[1]=le(d=>s(),["enter"]))},null,544),[[be,r.value.title]]),!r.value.id||r.value.manual?(w(),Y(T(Wr),{key:0,class:"form-group",label:"Property type"},{default:I(()=>[R(u,{modelValue:r.value.type,"onUpdate:modelValue":l[2]||(l[2]=d=>r.value.type=d),placeholder:"Select",ref:"input",label:"title","show-labels":!1,"select-first":!0,filterable:!0,"automatic-dropdown":!0,options:a},{singleLabel:I(({option:d})=>[f("div",null,[f("i",{class:L([d.icon,"mr-2"])},null,2),f("span",null,B(d.title),1)])]),option:I(({option:d})=>[f("div",null,[f("i",{class:L([d.icon,"mr-2"])},null,2),f("span",null,B(d.title),1)])]),_:1},8,["modelValue"])]),_:1})):j("",!0),f("ul",ma,[f("li",ha,[f("button",{class:"option-list__button",onClick:l[3]||(l[3]=d=>o.$emit("sort",r.value.name))}," Sort by "+B(r.value.name),1)]),f("li",{class:"option-list__item",onClick:l[4]||(l[4]=d=>o.$emit("clear-sort"))},ga),pa,r.value.manual?(w(),$("li",ya,[f("button",{onClick:l[5]||(l[5]=d=>i()),class:"option-list__button hover:bg-red-300"}," Delete ")])):j("",!0),f("li",ba,[f("button",{onClick:l[6]||(l[6]=d=>s()),class:"option-list__button hover:bg-green-300"}," Save ")])])])]),_:3})}}},Wn=Me(wa,[["__scopeId","data-v-30a949b3"]]);const zn=e=>(et("data-v-044f67a5"),e=e(),tt(),e),ka={class:"item-checkbox selection"},xa=["value"],_a={class:"item-checkbox"},Sa=zn(()=>f("div",{class:"flex items-center cursor-grab"},[f("div",{class:"handle text-gray-400"},[f("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:"iconify iconify--ic",width:"32",height:"32",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[f("path",{fill:"currentColor",d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2s.9-2 2-2s2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2s-2 .9-2 2s.9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2z"})])])],-1)),Ta={class:"points__container"},$a=zn(()=>f("div",{class:"flex justify-center w-5 h-full py-2 text-center rounded-full hover:bg-gray-200"},[f("div",{class:"flex items-center mr-2"},[f("i",{class:"fa fa-ellipsis-v"})])],-1)),Ma=["href"],Oa=["href"],Ca={__name:"ListCellTitle",props:{item:{type:Object,required:!0},index:{type:Number,required:!0},isSelectMode:{type:Boolean,default:!1},selectedItems:{type:Array,default(){return[]}}},setup(e){function t(n,r){const a=n.fields.find(s=>s.field_name==r);return a&&a.value}return(n,r)=>(w(),$("div",{class:L("item-false bg-gray-200 border border-white flex"),key:`item-false__title-${e.item.id}`},[f("div",ka,[re(f("input",{type:"checkbox","onUpdate:modelValue":r[0]||(r[0]=a=>e.item.selected=a),value:e.item.id},null,8,xa),[[Fe,e.item.selected]])]),f("div",_a,[re(f("input",{type:"checkbox",class:"checkbox-done",name:"",id:"","onUpdate:modelValue":r[1]||(r[1]=a=>e.item.done=a),onChange:r[2]||(r[2]=a=>n.$emit("saved",e.item,"done",e.item.done))},null,544),[[Fe,e.item.done]])]),Sa,R(At,{class:"flex items-center","field-name":"title","select-mode":e.isSelectMode,index:e.index,item:e.item,onSelected:r[3]||(r[3]=a=>n.$emit("selected",a)),onSaved:r[4]||(r[4]=a=>n.$emit("saved",e.item,"title",a))},null,8,["select-mode","index","item"]),f("div",Ta,[re(f("input",{type:"text",title:"Estimation Points",class:"points__input","onUpdate:modelValue":r[5]||(r[5]=a=>e.item.points=a),placeholder:"0",onKeydown:r[6]||(r[6]=le(a=>n.$emit("saved",e.item,"points",e.item.points),["enter"])),onBlur:r[7]||(r[7]=a=>n.$emit("saved",e.item,"points",e.item.points))},null,544),[[be,e.item.points]])]),R(T(Ct),{trigger:"click",onCommand:r[8]||(r[8]=a=>n.$emit("command",e.item,a))},{trigger:I(()=>[$a]),default:I(()=>[f("div",null,[R(ze,{command:"edit",icon:"fa fa-edit",as:"button"},{default:I(()=>[te("Edit ")]),_:1}),R(ze,{command:"delete",icon:"fa fa-trash",as:"button"},{default:I(()=>[te(" Delete ")]),_:1}),f("a",{href:t(e.item,"url_id"),target:"_blank",rel:"noopener noreferrer"},[t(e.item,"url_id")?(w(),Y(ze,{key:0,command:"go",icon:"fa fa-external-link-alt"},{default:I(()=>[te(" Link by id ")]),_:1})):j("",!0)],8,Ma),f("a",{href:t(e.item,"url_subject"),target:"_blank",rel:"noopener noreferrer"},[t(e.item,"url_subject")?(w(),Y(ze,{key:0,command:"go",icon:"fa fa-external-link-alt"},{default:I(()=>[te(" Link by Subject ")]),_:1})):j("",!0)],8,Oa)])]),_:1})]))}},Ea=Me(Ca,[["__scopeId","data-v-044f67a5"]]),Da={class:"font-bold"},Ia={key:1,class:"item-group-row__header"},Aa={class:"font-bold"},Pa=f("div",{class:"false-header"},null,-1),it={__name:"ListCellHeader",props:{visibleFields:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},fieldName:{type:String}},emits:["field-added"],setup(e){const t=e,n=N(()=>t.visibleFields.reduce((r,a)=>{var o,l;let s="";return((o=t.filters.sort)==null?void 0:o.includes(a.name))&&(s=(l=t.filters.sort)!=null&&l.includes("-")?"fas fa-sort-up":"fas fa-sort-down"),r[a.name]={sort:s},r},{}));return(r,a)=>(w(),$(Z,null,[f("div",Tr({class:"sticky_header"},r.$attrs),[e.visibleFields.length?(w(!0),$(Z,{key:0},ee(e.visibleFields,s=>(w(),$("div",{key:s.name,class:"item-group-row__header"},[f("span",Da,[ye(r.$slots,"default",{filterIcons:T(n)[s.name]},()=>[R(Wn,{"field-data":s,board:r.board,onSaved:a[0]||(a[0]=i=>r.$emit("field-added",i)),onSort:a[1]||(a[1]=i=>r.$emit("sort",i)),onClearSort:a[2]||(a[2]=i=>r.$emit("clear-sort"))},{default:I(()=>[te(B(s.title)+" ",1),f("i",{class:L(T(n)[s.name].sort)},null,2)]),_:2},1032,["field-data","board"])])])]))),128)):(w(),$("div",Ia,[f("span",Aa,[ye(r.$slots,"default",{filterIcons:T(n)})])]))],16),Pa],64))}},qn={red:"bg-red-500 text-white",blue:"bg-blue-500 text-white",green:"bg-green-500 text-white",yellow:"bg-yellow-500 text-white"},mt=e=>{try{return Gr(e)?Kr(e)?"Today":aa(e)?"Tomorrow":Zt(e)?ta(date.value,new Date).replace(" at 12:00 AM",""):Zt(e)?Ye(date.value,"iiii"):ra(e)?Ye(e,"MMM dd"):Ye(e,"MMM dd yyyy"):e}catch{return e}};function rt(e){const t=e||A(null),n=N(()=>t.value&&typeof t.value=="object"?s(t.value):t.value),r=N(()=>{const l=(t.value&&typeof t.value=="object",t.value);return mt(l)}),a=(l,u)=>Gt.fromJSDate(l||new Date).toFormat(u||"yyyy-MM-dd"),s=l=>l?Gt.fromJSDate(l).toISODate():"";return{formattedDate:n,toISO:s,formatDate:a,formatDurationFromMs:l=>Yr.fromMillis(l),getDateFromString:l=>{const u=l?l.split("-"):null;return u?new Date(u[0],u[1]-1,u[2]):null},date:t.value,humanDate:r}}const La={class:"inline-flex text-white py-1 justify-center group transition cursor-pointer"},Ra={class:"rounded-md bg-slate-900 space-x-2 px-4 flex items-center group-hover:hidden"},Na={class:L(["cursor-pointer text-small"])},ja=f("span",null," - ",-1),Ua={class:L(["cursor-pointer text-small"])},Ba={class:"hidden rounded-md items-center bg-slate-900 px-4 group-hover:flex"},Fa={__name:"CellSummaryDate",props:{...Fr,users:{type:Array,default(){return[]}}},emits:["saved","closed"],setup(e,{emit:t}){const n=e,r=N(()=>n.item[n.fieldName].value),a=N(()=>Vn(r.value.max,r.value.min));return(s,i)=>(w(),$("div",La,[f("div",Ra,[f("span",Na,B(T(mt)(T(r).min)),1),ja,f("span",Ua,B(T(mt)(T(r).max)),1)]),f("div",Ba,B(T(a)),1)]))}},Yn={__name:"ListRow",props:{item:{type:Object,required:!0},visibleFields:{type:Array,required:!0},rowIndex:{type:Number},slim:{type:Boolean},isSummary:{type:Boolean}},setup(e){const t=e;function n(s,i,o){if(!i||!s||t.isSummary)return;const l=i.fields&&i.fields.find(d=>d.field_name==o),u=l?l.value:i[o];if(u&&s.rules){const d=s.rules.find(h=>h.name=="bg");if(d){const h=d.options||s[d.reference],v=h&&h.find(p=>{const k=p.name||p.value;return u.toLowerCase()==k.toLowerCase()});return v?qn[v.result||v.color]:""}}return"bg-gray-200"}const r={progress:Hr,summaryDate:Fa},a=s=>s!=null&&s.type?r[s.type]:At;return(s,i)=>(w(),$("div",{class:L(["grid text-left item-group-row h-11",{"item-group ic-scroller ic-scroller-slim":e.slim}]),onScroll:i[0]||(i[0]=o=>s.$emit("scroll",o))},[(w(!0),$(Z,null,ee(e.visibleFields,(o,l)=>(w(),Y(Et(a(e.item[o.name])),{key:`${o.name}-${l}`,class:L(["text-center border border-white custom-field",[n(o,e.item,o.name)]]),"field-name":o.name,field:o,index:e.rowIndex,item:e.item,onSaved:u=>s.$emit("saved",e.item,o.name,u)},null,40,["class","field-name","field","index","item","onSaved"]))),128))],34))}},Ha={class:"ic-list__body"},Va=f("div",{class:"ic-list__title"},null,-1),Wa={key:0,class:"ic-list__add"},za={__name:"ListSummaryRow",props:{stage:{type:Object,required:!0},items:{type:Array},visibleFields:{type:Array},isExpanded:{type:Boolean}},setup(e){const t=e,n={label:(a,s)=>({value:a.reduce((i,o)=>{var l;if(i[o])i[o].count++;else{const u=(l=s.options.find(d=>d.name==o))!=null?l:{};i[o]={count:1,color:qn[u.color],label:u.label}}return i},{}),type:"progress"}),date:(a,s)=>{const i=a.reduce((o,l)=>{if(l){const u=Vr(l,"date","read"),d=u.getTime();o[d]=u}return o},{});return{type:"summaryDate",value:{min:i[Math.min(...Object.keys(i))],max:i[Math.max(...Object.keys(i))]}}},default(a,s){}},r=N(()=>t.visibleFields.reduce((a,s)=>{const i=n[s.type]||n.default,o=t.items.map(l=>l[s.name]);return a[s.name]=i(o,s),a},{}));return(a,s)=>(w(),$("div",Ha,[Va,R(Yn,{"is-summary":"",slim:"",item:T(r),"row-index":1e3,"visible-fields":e.visibleFields,id:`${e.stage.id}-slim-summary`,onScroll:s[0]||(s[0]=i=>a.$emit("scroll",i))},null,8,["item","visible-fields","id"]),e.isExpanded?(w(),$("div",Wa)):j("",!0)]))}},qa=(e,t)=>({syncScroll:r=>{const a={left:"scrollLeft",top:"scrollTop"},s=r.target[a[e]];document.querySelectorAll(`.${t}`).forEach(i=>{i.id!==r.target.id&&i.scrollTo({[e]:s})})}});const Ya=["data-table-size"],Qa={class:"ic-list__title"},Ga={class:"flex items-center space-x-2 header-cell"},Ka={class:"flex items-center"},Xa={key:0,class:"hidden item-group__selector"},Ja={key:1,class:"font-bold handle"},Za={key:2},es=["value"],ts={class:"hidden"},ns=f("div",{class:"flex justify-center w-5 h-full py-2 text-center rounded-full hover:bg-gray-200"},[f("div",{class:"flex items-center justify-center"},[f("i",{class:"fa fa-ellipsis-v"})])],-1),rs={class:"px-2 py-1 transition cursor-pointer hover:bg-slate-200"},as={key:0,class:"grid"},ss=["id"],os={key:0,class:"ic-list__add"},is=f("i",{class:"fa fa-plus",slot:"reference"},null,-1),ls={class:"grid"},us={key:0,class:"ic-list__footer"},ds={class:"grid grid-cols-10 text-left item-line"},cs={class:"flex items-center col-span-12 px-0 item-line-cell"},nn={__name:"ListView",props:{createMode:{type:Boolean},stage:{type:Object},board:{type:Object},selectedItems:{type:Array,default(){return[]}},items:{type:Array,default(){return[]}},filters:{type:Object}},emits:[],setup(e,{emit:t}){const n=e,r=ie({newItem:{},newField:{},isSelectMode:!1,isEditMode:!1,isExpanded:!0,isLoaded:!1});X(n.selectedItems,()=>{t("selected-items-updated",n.selectedItems)});const a=N(()=>n.board.fields.filter(b=>!b.hide)),s=N(()=>a.value.length);X(s,()=>{document.documentElement.style.setProperty("--board-column-size",s.value)},{deep:!0,immediate:!0});function i(){r.isExpanded=!r.isExpanded}const o=A();function l(){r.isEditMode=!r.isEditMode,$e(()=>{o.value&&o.value.focus()})}function u(b,g){const _=Math.max(...n.stage.items.map(C=>C.order));r.newItem.board_id=b.board_id,r.newItem.stage_id=b.id,r.newItem.fields=n.board.fields.map(C=>({field_id:C.id,field_name:C.name,value:r.newItem[C.name]})),r.newItem.order=_+1,t("saved",{...r.newItem},g),r.newItem={}}function d(){}function h(){r.newField={},me.Inertia.reload({preserveScroll:!0})}function v(b,g,_){b[g]=_,b.fields=n.board.fields.map(C=>({field_id:C.id,field_name:C.name,value:b[C.name]})),t("saved",{...b})}function p(b){var g;b.name=(g=o.value)==null?void 0:g.value,r.isEditMode=!1,t("stage-updated",{...b})}function k(){prop.stage.items.forEach(async(b,g)=>{b.order=g,t("saved",{...b},!1)}),me.Inertia.reload({preserveScroll:!0})}function S(b){switch(b){case"delete":t("board-deleted",item);break;case"edit":l();break;case"selection":r.isSelectMode=!r.isSelectMode;break}}function O(b,g){switch(g){case"delete":t("item-deleted",b);break;case"edit":t("open-item",b);break}}const P=b=>{t("sort",b)},F=b=>{t("clearSort",b)};function D(b,g){switch(g){case"clearSort":F(b);break;case"sort":P(b);break;default:t("saveOrder",b);break}}function V(){n.stage.items.forEach(b=>{b.selected=n.stage.selected})}const{newItem:W,newField:H,isSelectMode:x,isEditMode:M,isExpanded:m,isLoaded:y}=ue(r);A(),A();const{syncScroll:c}=qa("left","ic-scroller-slim");return(b,g)=>(w(),$("div",{class:L(["ic-list",{"rounded-md bg-gray-200 border border-slate-500":!T(m)}]),"data-table-size":T(s)},[f("div",{class:L(["ic-list__body",{"not-expanded":!T(m),loaded:T(y)}])},[f("div",Qa,[R(it,{class:"item-false__header",visibleFields:[{name:"title"}],filters:e.filters},{default:I(({filterIcons:_})=>[f("div",Ga,[f("div",Ka,[f("span",{class:"toolbar-buttons",onClick:i},[f("i",{class:L([T(m)?"fa fa-chevron-down":"fa fa-chevron-right"])},null,2)]),T(m)?(w(),$("div",Xa,[re(f("input",{type:"checkbox","onUpdate:modelValue":g[0]||(g[0]=C=>e.stage.selected=C),onChange:g[1]||(g[1]=C=>V())},null,544),[[Fe,e.stage.selected]])])):j("",!0),T(M)?(w(),$("div",Za,[f("input",{value:e.stage.name,type:"text",ref_key:"input",ref:o,onKeypress:g[2]||(g[2]=le(C=>p(e.stage),["enter"])),onBlur:g[3]||(g[3]=C=>p(e.stage))},null,40,es)])):(w(),$("span",Ja,B(e.stage.title||e.stage.name)+" "+B(T(x)?"(Selection Mode)":""),1)),f("div",ts,[f("i",{class:"mx-2 fa fa-edit",onClick:g[4]||(g[4]=C=>l(!0))}),R(T(zt),{trigger:"click",onSelect:S,onClick:g[5]||(g[5]=J(()=>{},["prevent"])),options:[{key:"edit",label:"Edit"},{key:"delete",label:"Delete"},{key:"selection",label:"Select Mode"}]},{default:I(()=>[ns]),_:1})])]),R(T(zt),{trigger:"click",onSelect:g[6]||(g[6]=C=>D("title",C)),onClick:g[7]||(g[7]=J(()=>{},["prevent"])),options:[{key:"sort",label:"Sort by Task Name"},{key:"clearSort",label:"Clear sort"},{key:"saveOrder",label:"Save this order"}]},{default:I(()=>[f("div",rs,[f("span",null,[te(B(e.items.length)+" Tasks ",1),f("i",{class:L(_.sort)},null,2)])])]),_:2},1024)])]),_:1},8,["filters"]),T(m)?(w(),$("div",as,[R(T(nt),{modelValue:e.stage.items,"onUpdate:modelValue":g[8]||(g[8]=_=>e.stage.items=_),onEnd:k,handle:".handle",class:"w-full"},{default:I(()=>[(w(!0),$(Z,null,ee(e.stage.items,(_,C)=>(w(),Y(Ea,{class:"flex bg-gray-200 border border-white item-false",key:`item-false__title-${_.id}`,item:_,index:C,"selected-items":e.selectedItems,"is-select-mode":T(x),onSelected:d,onSaved:v,onCommand:O},null,8,["item","index","selected-items","is-select-mode"]))),128))]),_:1},8,["modelValue"])])):j("",!0)]),f("div",{class:"item-group ic-scroller ic-scroller-slim",onScroll:g[9]||(g[9]=(..._)=>T(c)&&T(c)(..._)),id:`${e.stage.id}-slim-body`},[R(it,{class:"grid py-1 text-left item-group-row","visible-fields":T(a),filters:e.filters,onSort:P,onClearSort:F,onFieldAdded:h},null,8,["visible-fields","filters"]),T(m)?(w(!0),$(Z,{key:0},ee(e.items,(_,C)=>(w(),Y(Yn,{key:`item-${C}-${_.id}`,id:`item-${C}-${_.id}`,item:_,"row-index":C,"visible-fields":T(a),onSaved:v},null,8,["id","item","row-index","visible-fields"]))),128)):j("",!0)],40,ss),T(m)?(w(),$("div",os,[R(it,{class:"item-false__header sticky_header"},{default:I(()=>[R(Wn,{"field-data":T(H),board:e.board,onSaved:h},{default:I(()=>[is]),_:1},8,["field-data","board"])]),_:1}),f("div",ls,[(w(!0),$(Z,null,ee(e.stage.items,_=>(w(),$("div",{class:"item-false",key:`item-false-${_.id}`}))),128))])])):j("",!0)],2),T(m)?(w(),$("div",us,[f("div",ds,[f("div",cs,[R(At,{class:"flex items-center w-full","field-name":"title","is-title":!0,index:-1,item:T(W),"is-new":!0,onSaved:g[10]||(g[10]=_=>T(W).title=_),onKeydown:g[11]||(g[11]=le(_=>u(e.stage),["enter"]))},null,8,["item"])])])])):j("",!0),R(za,{items:e.items,stage:e.stage,"visible-fields":T(a),onScroll:T(c)},null,8,["items","stage","visible-fields","onScroll"])],10,Ya))}};function fe(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function q(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function z(e){q(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Qn(e,t){q(2,arguments);var n=z(e),r=fe(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function Gn(e){q(1,arguments);var t=z(e),n=t.getDay();return n===0||n===6}function fs(e,t){q(2,arguments);var n=z(e).getTime(),r=fe(t);return new Date(n+r)}var ms={};function We(){return ms}function Ge(e,t){var n,r,a,s,i,o,l,u;q(1,arguments);var d=We(),h=fe((n=(r=(a=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(i=t.locale)===null||i===void 0||(o=i.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=z(e),p=v.getDay(),k=(p<h?7:0)+p-h;return v.setDate(v.getDate()-k),v.setHours(0,0,0,0),v}function ht(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Ke(e){q(1,arguments);var t=z(e);return t.setHours(0,0,0,0),t}var hs=864e5;function rn(e,t){q(2,arguments);var n=Ke(e),r=Ke(t),a=n.getTime()-ht(n),s=r.getTime()-ht(r);return Math.round((a-s)/hs)}function vs(e,t){q(2,arguments);var n=fe(t),r=n*7;return Qn(e,r)}function Be(e,t){q(2,arguments);var n=Ke(e),r=Ke(t);return n.getTime()===r.getTime()}function gs(e){return q(1,arguments),e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ps(e){if(q(1,arguments),!gs(e)&&typeof e!="number")return!1;var t=z(e);return!isNaN(Number(t))}function Kn(e){q(1,arguments);var t=z(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Rt(e,t){var n;q(1,arguments);var r=e||{},a=z(r.start),s=z(r.end),i=s.getTime();if(!(a.getTime()<=i))throw new RangeError("Invalid interval");var o=[],l=a;l.setHours(0,0,0,0);var u=Number((n=t==null?void 0:t.step)!==null&&n!==void 0?n:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;l.getTime()<=i;)o.push(z(l)),l.setDate(l.getDate()+u),l.setHours(0,0,0,0);return o}function Xn(e){q(1,arguments);var t=e||{},n=z(t.start),r=z(t.end),a=r.getTime(),s=[];if(!(n.getTime()<=a))throw new RangeError("Invalid interval");var i=n;for(i.setHours(0,0,0,0),i.setDate(1);i.getTime()<=a;)s.push(z(i)),i.setMonth(i.getMonth()+1);return s}function ys(e,t){q(1,arguments);var n=e||{},r=z(n.start),a=z(n.end),s=a.getTime();if(!(r.getTime()<=s))throw new RangeError("Invalid interval");var i=Ge(r,t),o=Ge(a,t);i.setHours(15),o.setHours(15),s=o.getTime();for(var l=[],u=i;u.getTime()<=s;)u.setHours(0),l.push(z(u)),u=vs(u,1),u.setHours(15);return l}function Jn(e){q(1,arguments);var t=z(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Nt(e){q(1,arguments);var t=z(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function jt(e){q(1,arguments);var t=z(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function bs(e,t){q(2,arguments);var n=fe(t);return fs(e,-n)}var ws=864e5;function ks(e){q(1,arguments);var t=z(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),a=n-r;return Math.floor(a/ws)+1}function Xe(e){q(1,arguments);var t=1,n=z(e),r=n.getUTCDay(),a=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function Zn(e){q(1,arguments);var t=z(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=Xe(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var i=Xe(s);return t.getTime()>=a.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function xs(e){q(1,arguments);var t=Zn(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=Xe(n);return r}var _s=6048e5;function Ss(e){q(1,arguments);var t=z(e),n=Xe(t).getTime()-xs(t).getTime();return Math.round(n/_s)+1}function Je(e,t){var n,r,a,s,i,o,l,u;q(1,arguments);var d=We(),h=fe((n=(r=(a=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(i=t.locale)===null||i===void 0||(o=i.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=z(e),p=v.getUTCDay(),k=(p<h?7:0)+p-h;return v.setUTCDate(v.getUTCDate()-k),v.setUTCHours(0,0,0,0),v}function er(e,t){var n,r,a,s,i,o,l,u;q(1,arguments);var d=z(e),h=d.getUTCFullYear(),v=We(),p=fe((n=(r=(a=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(i=t.locale)===null||i===void 0||(o=i.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&a!==void 0?a:v.firstWeekContainsDate)!==null&&r!==void 0?r:(l=v.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=new Date(0);k.setUTCFullYear(h+1,0,p),k.setUTCHours(0,0,0,0);var S=Je(k,t),O=new Date(0);O.setUTCFullYear(h,0,p),O.setUTCHours(0,0,0,0);var P=Je(O,t);return d.getTime()>=S.getTime()?h+1:d.getTime()>=P.getTime()?h:h-1}function Ts(e,t){var n,r,a,s,i,o,l,u;q(1,arguments);var d=We(),h=fe((n=(r=(a=(s=t==null?void 0:t.firstWeekContainsDate)!==null&&s!==void 0?s:t==null||(i=t.locale)===null||i===void 0||(o=i.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&a!==void 0?a:d.firstWeekContainsDate)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),v=er(e,t),p=new Date(0);p.setUTCFullYear(v,0,h),p.setUTCHours(0,0,0,0);var k=Je(p,t);return k}var $s=6048e5;function Ms(e,t){q(1,arguments);var n=z(e),r=Je(n,t).getTime()-Ts(n,t).getTime();return Math.round(r/$s)+1}function G(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var Os={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return G(t==="yy"?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return t==="M"?String(n+1):G(n+1,2)},d:function(e,t){return G(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(e,t){return G(e.getUTCHours()%12||12,t.length)},H:function(e,t){return G(e.getUTCHours(),t.length)},m:function(e,t){return G(e.getUTCMinutes(),t.length)},s:function(e,t){return G(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds(),a=Math.floor(r*Math.pow(10,n-3));return G(a,t.length)}};const ge=Os;var Ee={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Cs={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){var r=e.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return ge.y(e,t)},Y:function(e,t,n,r){var a=er(e,r),s=a>0?a:1-a;if(t==="YY"){var i=s%100;return G(i,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):G(s,t.length)},R:function(e,t){var n=Zn(e);return G(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return G(n,t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return G(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return G(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return ge.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return G(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var a=Ms(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):G(a,t.length)},I:function(e,t,n){var r=Ss(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):G(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):ge.d(e,t)},D:function(e,t,n){var r=ks(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):G(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var a=e.getUTCDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return G(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var a=e.getUTCDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return G(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return G(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours(),a=r/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r=e.getUTCHours(),a;switch(r===12?a=Ee.noon:r===0?a=Ee.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r=e.getUTCHours(),a;switch(r>=17?a=Ee.evening:r>=12?a=Ee.afternoon:r>=4?a=Ee.morning:a=Ee.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){var r=e.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ge.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ge.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):G(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):G(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ge.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ge.s(e,t)},S:function(e,t){return ge.S(e,t)},X:function(e,t,n,r){var a=r._originalDate||e,s=a.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return sn(s);case"XXXX":case"XX":return xe(s);case"XXXXX":case"XXX":default:return xe(s,":")}},x:function(e,t,n,r){var a=r._originalDate||e,s=a.getTimezoneOffset();switch(t){case"x":return sn(s);case"xxxx":case"xx":return xe(s);case"xxxxx":case"xxx":default:return xe(s,":")}},O:function(e,t,n,r){var a=r._originalDate||e,s=a.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+an(s,":");case"OOOO":default:return"GMT"+xe(s,":")}},z:function(e,t,n,r){var a=r._originalDate||e,s=a.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+an(s,":");case"zzzz":default:return"GMT"+xe(s,":")}},t:function(e,t,n,r){var a=r._originalDate||e,s=Math.floor(a.getTime()/1e3);return G(s,t.length)},T:function(e,t,n,r){var a=r._originalDate||e,s=a.getTime();return G(s,t.length)}};function an(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),s=r%60;if(s===0)return n+String(a);var i=t||"";return n+String(a)+i+G(s,2)}function sn(e,t){if(e%60===0){var n=e>0?"-":"+";return n+G(Math.abs(e)/60,2)}return xe(e,t)}function xe(e,t){var n=t||"",r=e>0?"-":"+",a=Math.abs(e),s=G(Math.floor(a/60),2),i=G(a%60,2);return r+s+n+i}const Es=Cs;var on=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},tr=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Ds=function(e,t){var n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return on(e,t);var s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",on(r,t)).replace("{{time}}",tr(a,t))},Is={p:tr,P:Ds};const As=Is;var Ps=["D","DD"],Ls=["YY","YYYY"];function Rs(e){return Ps.indexOf(e)!==-1}function Ns(e){return Ls.indexOf(e)!==-1}function ln(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var js={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Us=function(e,t,n){var r,a=js[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};const Bs=Us;function lt(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var Fs={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Hs={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Vs={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ws={date:lt({formats:Fs,defaultWidth:"full"}),time:lt({formats:Hs,defaultWidth:"full"}),dateTime:lt({formats:Vs,defaultWidth:"full"})};const zs=Ws;var qs={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ys=function(e,t,n,r){return qs[e]};const Qs=Ys;function Ne(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",a;if(r==="formatting"&&e.formattingValues){var s=e.defaultFormattingWidth||e.defaultWidth,i=n!=null&&n.width?String(n.width):s;a=e.formattingValues[i]||e.formattingValues[s]}else{var o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}var u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}var Gs={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ks={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Xs={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Js={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Zs={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},eo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},to=function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},no={ordinalNumber:to,era:Ne({values:Gs,defaultWidth:"wide"}),quarter:Ne({values:Ks,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Ne({values:Xs,defaultWidth:"wide"}),day:Ne({values:Js,defaultWidth:"wide"}),dayPeriod:Ne({values:Zs,defaultWidth:"wide",formattingValues:eo,defaultFormattingWidth:"wide"})};const ro=no;function je(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;var i=s[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?so(o,function(h){return h.test(i)}):ao(o,function(h){return h.test(i)}),u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(i.length);return{value:u,rest:d}}}function ao(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function so(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function oo(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var a=r[0],s=t.match(e.parsePattern);if(!s)return null;var i=e.valueCallback?e.valueCallback(s[0]):s[0];i=n.valueCallback?n.valueCallback(i):i;var o=t.slice(a.length);return{value:i,rest:o}}}var io=/^(\d+)(th|st|nd|rd)?/i,lo=/\d+/i,uo={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},co={any:[/^b/i,/^(a|c)/i]},fo={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mo={any:[/1/i,/2/i,/3/i,/4/i]},ho={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vo={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},go={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},po={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yo={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bo={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},wo={ordinalNumber:oo({matchPattern:io,parsePattern:lo,valueCallback:function(e){return parseInt(e,10)}}),era:je({matchPatterns:uo,defaultMatchWidth:"wide",parsePatterns:co,defaultParseWidth:"any"}),quarter:je({matchPatterns:fo,defaultMatchWidth:"wide",parsePatterns:mo,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:je({matchPatterns:ho,defaultMatchWidth:"wide",parsePatterns:vo,defaultParseWidth:"any"}),day:je({matchPatterns:go,defaultMatchWidth:"wide",parsePatterns:po,defaultParseWidth:"any"}),dayPeriod:je({matchPatterns:yo,defaultMatchWidth:"any",parsePatterns:bo,defaultParseWidth:"any"})};const ko=wo;var xo={code:"en-US",formatDistance:Bs,formatLong:zs,formatRelative:Qs,localize:ro,match:ko,options:{weekStartsOn:0,firstWeekContainsDate:1}};const _o=xo;var So=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,To=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$o=/^'([^]*?)'?$/,Mo=/''/g,Oo=/[a-zA-Z]/;function Ut(e,t,n){var r,a,s,i,o,l,u,d,h,v,p,k,S,O,P,F,D,V;q(2,arguments);var W=String(t),H=We(),x=(r=(a=n==null?void 0:n.locale)!==null&&a!==void 0?a:H.locale)!==null&&r!==void 0?r:_o,M=fe((s=(i=(o=(l=n==null?void 0:n.firstWeekContainsDate)!==null&&l!==void 0?l:n==null||(u=n.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&o!==void 0?o:H.firstWeekContainsDate)!==null&&i!==void 0?i:(h=H.locale)===null||h===void 0||(v=h.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var m=fe((p=(k=(S=(O=n==null?void 0:n.weekStartsOn)!==null&&O!==void 0?O:n==null||(P=n.locale)===null||P===void 0||(F=P.options)===null||F===void 0?void 0:F.weekStartsOn)!==null&&S!==void 0?S:H.weekStartsOn)!==null&&k!==void 0?k:(D=H.locale)===null||D===void 0||(V=D.options)===null||V===void 0?void 0:V.weekStartsOn)!==null&&p!==void 0?p:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!x.localize)throw new RangeError("locale must contain localize property");if(!x.formatLong)throw new RangeError("locale must contain formatLong property");var y=z(e);if(!ps(y))throw new RangeError("Invalid time value");var c=ht(y),b=bs(y,c),g={firstWeekContainsDate:M,weekStartsOn:m,locale:x,_originalDate:y},_=W.match(To).map(function(C){var E=C[0];if(E==="p"||E==="P"){var Q=As[E];return Q(C,x.formatLong)}return C}).join("").match(So).map(function(C){if(C==="''")return"'";var E=C[0];if(E==="'")return Co(C);var Q=Es[E];if(Q)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Ns(C)&&ln(C,t,String(e)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Rs(C)&&ln(C,t,String(e)),Q(b,C,x.localize,g);if(E.match(Oo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return C}).join("");return _}function Co(e){var t=e.match($o);return t?t[1].replace(Mo,"'"):e}function Bt(e,t){q(2,arguments);var n=z(e),r=z(t);return n.getTime()>r.getTime()}function Ft(e,t){q(2,arguments);var n=z(e),r=z(t);return n.getTime()<r.getTime()}function Eo(e,t,n){q(2,arguments);var r=Ge(e,n),a=Ge(t,n);return r.getTime()===a.getTime()}function nr(e,t){q(2,arguments);var n=z(e),r=z(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}const at=(e,t)=>{const n=e.__vccOpts||e;for(const[r,a]of t)n[r]=a;return n},Do={props:{title:{type:String,default:""},isLeftSide:{type:Boolean},isRightSide:{type:Boolean},markerBgClass:{type:String,default:""}}},Io=["title"];function Ao(e,t,n,r,a,s){return w(),$("span",{class:L(["absolute left-0 inline-block w-full h-4 mt-2 cursor-pointer marker-point",{[`${n.markerBgClass}`]:!0,"rounded-l-lg task-marker__side":n.isLeftSide,"rounded-r-lg task-marker__side":n.isRightSide}]),title:n.title},null,10,Io)}const Ht=at(Do,[["render",Ao],["__scopeId","data-v-c2247641"]]),Po={name:"RoadmapViewWeek",props:{tasks:Array,year:Date,focusedTextClass:{type:String,default:"text-blue-500"},markerBgClass:{type:String,default:"bg-red-500"}},components:{MarkerPoint:Ht},setup(){const e=(s,i)=>Rt({start:s,end:i}),t=s=>Eo(s,new Date),n=s=>Be(s,new Date),r=(s,i,o)=>Bt(o,s)&&Ft(o,i)||Be(o,s)||Be(i,o),a=A(null);return{mainIntervalTime:ys({start:jt(new Date),end:Nt(new Date)}),isCurrentWeek:t,isCurrentDay:n,isHourBetween:r,isSameDay:Be,isWeekend:Gn,format:Ut,addDays:Qn,gantDate:a,getDaysForInterval:e}}},Lo={class:"flex units"},Ro={class:"units-body"};function No(e,t,n,r,a,s){const i=K("marker-point");return w(!0),$(Z,null,ee(r.mainIntervalTime,o=>(w(),$("div",{class:"relative text-left border-r task-col__header",key:o},[f("span",{class:L(["pl-2 text-sm font-bold text-gray-400",{[`${n.focusedTextClass} marker`]:r.isCurrentWeek(o)}])},B(r.format(o,"MMM dd"))+" - "+B(r.format(r.addDays(o,6),"MMM dd")),3),f("div",Lo,[(w(!0),$(Z,null,ee(r.getDaysForInterval(o,r.addDays(o,6)),l=>(w(),$("div",{key:l,class:L(["w-10 text-center",{"text-blue-400 marker-day font-bold":r.isCurrentDay(l),"bg-gray-100 font-bold":r.isWeekend(l)}])},[f("span",{class:L(["inline-block w-full pb-2 text-sm text-gray-400",{[`${n.focusedTextClass} font-bold`]:r.isCurrentDay(l)}])},B(r.format(l,"dd")),3),f("div",Ro,[(w(!0),$(Z,null,ee(n.tasks,u=>(w(),$("div",{key:u.id,class:"relative w-full h-10 border"},[r.isHourBetween(u.start,u.end,l)?(w(),Y(i,{key:0,"marker-bg-class":u.colorClass||n.markerBgClass,"is-left-side":r.isSameDay(u.start,l),"is-right-side":r.isSameDay(u.end,l),title:`${u.title} ${r.format(u.start,"dd")}`},null,8,["marker-bg-class","is-left-side","is-right-side","title"])):j("",!0)]))),128))])],2))),128))])]))),128)}const jo=at(Po,[["render",No]]);function rr(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return n.length>=t?e.apply(null,n.slice(0,t).reverse()):function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return rr(e,t,n.concat(a))}}const pe=rr(Be,2),Ae=e=>{const t=document.querySelector(".marker-day");t&&t.scrollIntoView&&t.scrollIntoView(e?{behavior:"smooth",block:"center",inline:"start"}:{inline:"center"})},Uo={name:"RoadmapViewDays",props:{tasks:Array,year:Date,focusedTextClass:{type:String,default:"text-blue-500"},markerBgClass:{type:String,default:"bg-red-500"}},components:{MarkerPoint:Ht},setup(){const e=s=>Rt({start:Jn(s),end:Kn(s)}),t=s=>nr(s,new Date),n=s=>pe(s,new Date),r=(s,i,o)=>Bt(o,s)&&Ft(o,i)||pe(o,s)||pe(i,o),a=A(null);return we(()=>{$e(()=>{Ae()})}),{months:Xn({start:jt(new Date),end:Nt(new Date)}),isCurrentMonth:t,isCurrentDay:n,isHourBetween:r,isSameDay:pe,isWeekend:Gn,format:Ut,ganttDate:a,getDaysForMonth:e,scrollToToday:Ae}}},Bo={class:"flex units"},Fo={class:"units-body"};function Ho(e,t,n,r,a,s){const i=K("marker-point");return w(!0),$(Z,null,ee(r.months,o=>(w(),$("div",{class:"relative text-left border-r task-col__header",key:o},[f("span",{class:L(["pl-2 text-sm font-bold text-gray-400",{[`${n.focusedTextClass} marker`]:r.isCurrentMonth(o)}])},B(r.format(o,"MMM yyyy")),3),f("div",Bo,[(w(!0),$(Z,null,ee(r.getDaysForMonth(o),l=>(w(),$("div",{key:l,class:L(["w-10 text-center",{"text-blue-400 marker-day font-bold":r.isCurrentDay(l),"bg-gray-100 font-bold":r.isWeekend(l)}])},[f("span",{class:L(["inline-block w-full pb-2 text-sm text-gray-400",{[`${n.focusedTextClass} font-bold`]:r.isCurrentDay(l)}])},B(r.format(l,"dd")),3),f("div",Fo,[(w(!0),$(Z,null,ee(n.tasks,u=>(w(),$("div",{key:u.id,class:"relative w-full h-10 border"},[r.isHourBetween(u.start,u.end,l)?(w(),Y(i,{key:0,"marker-bg-class":u.colorClass||n.markerBgClass,"is-left-side":r.isSameDay(u.start,l),"is-right-side":r.isSameDay(u.end,l),title:`${u.title} ${r.format(u.start,"dd")}`},null,8,["marker-bg-class","is-left-side","is-right-side","title"])):j("",!0)]))),128))])],2))),128))])]))),128)}const Vo=at(Uo,[["render",Ho]]),Wo={name:"RoadmapViewMonth",props:{tasks:Array,year:Date,focusedTextClass:{type:String,default:"text-blue-500"},markerBgClass:{type:String,default:"bg-red-500"}},components:{MarkerPoint:Ht},setup(){const e=s=>Rt({start:Jn(s),end:Kn(s)}),t=s=>nr(s,new Date),n=s=>pe(s,new Date),r=(s,i,o)=>Bt(o,s)&&Ft(o,i)||pe(o,s)||pe(i,o),a=A(null);return we(()=>{$e(()=>{Ae()})}),{months:Xn({start:jt(new Date),end:Nt(new Date)}),isCurrentMonth:t,isCurrentDay:n,isHourBetween:r,isSameDay:pe,format:Ut,gantDate:a,getDaysForMonth:e,scrollToToday:Ae}}},zo={class:"units flex"},qo={class:"units-body"};function Yo(e,t,n,r,a,s){const i=K("marker-point");return w(!0),$(Z,null,ee(r.months,o=>(w(),$("div",{class:"task-col__header border-r text-left relative",key:o},[f("span",{class:L(["font-bold text-gray-400 pl-2 text-sm",{[`${n.focusedTextClass} marker`]:r.isCurrentMonth(o)}])},B(r.format(o,"MMM yyyy")),3),f("div",zo,[(w(!0),$(Z,null,ee(r.getDaysForMonth(o),l=>(w(),$("div",{key:l,class:L(["w-2 text-center",{"marker-day font-bold":r.isCurrentDay(l)}])},[f("span",{class:L(["inline-block h-6 text-gray-400 text-xs w-full",{"fix-day-height":r.isCurrentDay(l)}])},B(r.isCurrentDay(l)?"T":""),3),f("div",qo,[(w(!0),$(Z,null,ee(n.tasks,u=>(w(),$("div",{key:u.id,class:"border-t border-b h-10 w-full relative"},[r.isHourBetween(u.start,u.end,l)?(w(),Y(i,{key:0,"marker-bg-class":u.colorClass||n.markerBgClass,"is-left-side":r.isSameDay(u.start,l),"is-right-side":r.isSameDay(u.end,l),title:`${u.title} ${r.format(u.start,"dd")}`},null,8,["marker-bg-class","is-left-side","is-right-side","title"])):j("",!0)]))),128))])],2))),128))])]))),128)}const Qo=at(Wo,[["render",Yo],["__scopeId","data-v-5974452a"]]),Go={class:"gant-vue"},Ko={key:0,class:"flex justify-between w-full py-2 space-x-5 text-sm text-left search-bar"},Xo={class:""},Jo={key:0,type:"search",class:"w-4/12 px-4 border-r-2 focus:outline-none",placeholder:"Search by task name or custom field value"},Zo=["disabled"],ei=["disabled"],ti=f("option",{value:"d"},"Day",-1),ni=f("option",{value:"w"},"Week",-1),ri=f("option",{value:"m"},"Month",-1),ai=[ti,ni,ri],si={class:"flex w-full overflow-hidden border-t custom-table"},oi={class:"border-r task-column min-w-fit"},ii=f("div",{class:"flex items-center justify-center font-bold text-gray-500 bg-gray-100 task-col__header h-14"}," Task Title ",-1),li=["onClick"],ui={class:"mx-2 text-left"},di={class:"flex w-full overflow-x-auto months gantt-scroller",ref:"gantDate"},ci={__name:"index",props:{tasks:Array,focusedTextClass:{type:String,default:"text-blue-500"},showToolbar:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!1},markerBgClass:{type:String,default:"bg-red-500"}},setup(e){we(()=>{$e(()=>{Ae()})});const t=ie({year:new Date,viewType:"d",viewTypes:{d:"days",w:"week",m:"month"},modes:N(()=>Object.keys(t.viewTypes)),currentMode:N(()=>t.modes.findIndex(u=>u==t.viewType)),canZoomIn:N(()=>t.currentMode!==0),canZoomOut:N(()=>t.currentMode!==t.modes.length-1),componentName:N(()=>({d:Vo,w:jo,m:Qo})[t.viewType])}),n=()=>{t.canZoomIn&&(t.viewType=t.modes[t.currentMode-1])},r=()=>{t.canZoomOut&&(t.viewType=t.modes[t.currentMode+1])},{year:a,viewType:s,canZoomIn:i,canZoomOut:o,componentName:l}=ue(t);return(u,d)=>(w(),$("div",Go,[e.showToolbar?(w(),$("div",Ko,[f("div",Xo,[e.showSearch?(w(),$("input",Jo)):j("",!0),f("button",{class:"px-2 py-1 rounded-md hover:bg-gray-100 focus:outline-none",onClick:d[0]||(d[0]=h=>T(Ae)(!0))}," Today "),f("button",{class:"px-2 py-1 rounded-md hover:bg-gray-100 focus:outline-none",onClick:r,disabled:!T(o)}," - ",8,Zo),f("button",{class:"px-2 py-1 rounded-md hover:bg-gray-100 focus:outline-none",onClick:n,disabled:!T(i)}," + ",8,ei),re(f("select",{class:"px-2 py-1 rounded-md hover:bg-gray-100 focus:outline-none","onUpdate:modelValue":d[1]||(d[1]=h=>Mr(s)?s.value=h:null)},ai,512),[[$r,T(s)]])]),f("div",null,[ye(u.$slots,"actionsRight")])])):j("",!0),f("div",si,[f("div",oi,[ii,(w(!0),$(Z,null,ee(e.tasks,h=>(w(),$("div",{class:"h-10 border-b-2 cursor-pointer min-w-max task-col__cell",key:h.id,onClick:v=>u.$emit("task-clicked",h)},[ye(u.$slots,"description",{item:h,focusedTextClass:e.focusedTextClass,diferenceInCalendarDays:T(rn)(h.end,h.start)},()=>[f("div",ui,[te(B(h.title)+" ",1),f("span",{class:L(["text-sm font-bold",e.focusedTextClass])},B(T(rn)(h.end,h.start))+" days ",3)])])],8,li))),128))]),f("div",di,[(w(),Y(Et(T(l)),{year:T(a),tasks:e.tasks,"focused-text-class":e.focusedTextClass,"marker-bg-class":e.markerBgClass},null,8,["year","tasks","focused-text-class","marker-bg-class"]))],512)])]))}},fi=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/;function Pe(...e){const t=e.reduce((n,r)=>n+r.source,"");return RegExp(`^${t}$`)}const ar=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,sr=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,or=RegExp(`${sr.source}${ar.source}?`),Vt=RegExp(`(?:T${or.source})?`),mi=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,hi=/(\d{4})-?W(\d\d)(?:-?(\d))?/,vi=/(\d{4})-?(\d{3})/,gi=/(\d{4})-(\d\d)-(\d\d)/,ir=RegExp(`${sr.source} ?(?:${ar.source}|(${fi.source}))?`),pi=RegExp(`(?: ${ir.source})?`);Pe(mi,Vt);Pe(hi,Vt);Pe(vi,Vt);Pe(or);Pe(gi,pi);Pe(ir);var un;const yi=typeof window<"u";yi&&((un=window==null?void 0:window.navigator)==null?void 0:un.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function bi(e){return e}const vt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gt="__vueuse_ssr_handlers__";vt[gt]=vt[gt]||{};vt[gt];var dn;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(dn||(dn={}));var wi=Object.defineProperty,cn=Object.getOwnPropertySymbols,ki=Object.prototype.hasOwnProperty,xi=Object.prototype.propertyIsEnumerable,fn=(e,t,n)=>t in e?wi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_i=(e,t)=>{for(var n in t||(t={}))ki.call(t,n)&&fn(e,n,t[n]);if(cn)for(var n of cn(t))xi.call(t,n)&&fn(e,n,t[n]);return e};const Si={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};_i({linear:bi},Si);const Ti=e=>(et("data-v-3827c73e"),e=e(),tt(),e),$i={class:"font-bold text-gray-500 dark:text-gray-300"},Mi={class:"flex items-center w-full"},Oi={key:0,class:"mr-2 opacity-0 fa fa-arrows-alt checklist-item__move handle"},Ci=["onUpdate:modelValue","onChange"],Ei=["disabled","onUpdate:modelValue"],Di={class:"w-5"},Ii=["onClick"],Ai=Ti(()=>f("input",{type:"checkbox",disabled:"",class:"mr-2"},null,-1)),Pi=["value"],Li={__name:"ListContainer",props:{modelValue:String,items:Array,task:Object,allowEdit:Boolean},emits:{updated:Array,"update:items":Array,"update:modelValue":String},setup(e,{emit:t}){const n=e,r=A(!1),a=A(null),s=A("");X(()=>n.modelValue,S=>{S!=s.value&&(s.value=S)});const i=S=>{n.items.splice(S,1)},o=()=>{t("update:modelValue","")},l=()=>{if(!s.value){ElNotification({title:"Missing Title",message:"Title is required for a checklist item"});return}n.items.push({title:s.value,done:!1}),o(),a.value&&a.value.focus()},u=N(()=>Number(n.items&&n.items.filter(S=>S.done).length||0)),d=A(null),h=A(!1),v=()=>{h.value=!0},p=()=>{},k=()=>{h.value&&n.task&&n.task.uid&&(p({uid:n.task.uid,checklist:[...n.items]}),h.value=!1)};return X(()=>n.task&&n.task.uid,()=>{o()}),we(()=>{la(d,()=>{k()})}),Or(()=>{k()}),(S,O)=>(w(),$("div",{class:"text-sm checklist-container",ref_key:"checklistContainer",ref:d},[f("h4",$i," Checklist ("+B(T(u))+" / "+B(e.items?e.items.length:0)+") ",1),R(T(nt),{"model-value":e.items,"onUpdate:modelValue":O[0]||(O[0]=P=>S.$emit("update:items")),handle:".handle"},{default:I(()=>[(w(!0),$(Z,null,ee(e.items,(P,F)=>(w(),$("div",{key:P.id,class:"flex items-center justify-between h-8 px-2 my-2 bg-white rounded-sm cursor-default checklist__item dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-50"},[f("div",Mi,[e.allowEdit?(w(),$("i",Oi)):j("",!0),re(f("input",{type:"checkbox",class:"mx-2 form-control-check checkbox-done","onUpdate:modelValue":D=>P.done=D,onChange:J(v,["stop"])},null,40,Ci),[[Fe,P.done]]),re(f("input",{type:"text",class:"w-full ml-2 bg-transparent cursor-default focus:outline-none",disabled:!e.allowEdit,"onUpdate:modelValue":D=>P.title=D},null,8,Ei),[[be,P.title]])]),f("button",Di,[e.allowEdit?(w(),$("i",{key:0,class:"text-gray-400 opacity-0 cursor-pointer fa fa-trash checklist-item__delete hover:text-red-300",onClick:D=>i(F)},null,8,Ii)):j("",!0)])]))),128))]),_:1},8,["model-value"]),e.allowEdit?(w(),$("div",{key:0,class:L(["flex items-center justify-between px-2 bg-gray-100 border-2 border-gray-100 rounded-md shadow-sm text dark:bg-gray-800 dark:border-gray-600",{"border-gray-400":r.value}])},[Ai,f("input",{value:e.modelValue,class:"w-full h-8 bg-gray-100 dark:bg-gray-800 dark:text-gray-300 focus:outline-none",type:"text",ref_key:"input",ref:a,onInput:O[1]||(O[1]=P=>t("update:modelValue",a.value.value)),onKeydown:O[2]||(O[2]=le(J(P=>l(),["exact","prevent"]),["enter"])),onFocus:O[3]||(O[3]=P=>r.value=!0),onBlur:O[4]||(O[4]=P=>r.value=!1),placeholder:"+ Add an item and press enter"},null,40,Pi)],2)):j("",!0)],512))}},Ri=Me(Li,[["__scopeId","data-v-3827c73e"]]);function ve(e){return Array.isArray?Array.isArray(e):dr(e)==="[object Array]"}const Ni=1/0;function ji(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Ni?"-0":t}function Ui(e){return e==null?"":ji(e)}function de(e){return typeof e=="string"}function lr(e){return typeof e=="number"}function Bi(e){return e===!0||e===!1||Fi(e)&&dr(e)=="[object Boolean]"}function ur(e){return typeof e=="object"}function Fi(e){return ur(e)&&e!==null}function se(e){return e!=null}function ut(e){return!e.trim().length}function dr(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Hi="Incorrect 'index' type",Vi=e=>`Invalid value for key ${e}`,Wi=e=>`Pattern length exceeds max of ${e}.`,zi=e=>`Missing ${e} property in key`,qi=e=>`Property 'weight' in key '${e}' must be a positive integer`,mn=Object.prototype.hasOwnProperty;class Yi{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let a=cr(r);n+=a.weight,this._keys.push(a),this._keyMap[a.id]=a,n+=a.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function cr(e){let t=null,n=null,r=null,a=1,s=null;if(de(e)||ve(e))r=e,t=hn(e),n=pt(e);else{if(!mn.call(e,"name"))throw new Error(zi("name"));const i=e.name;if(r=i,mn.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(qi(i));t=hn(i),n=pt(i),s=e.getFn}return{path:t,id:n,weight:a,src:r,getFn:s}}function hn(e){return ve(e)?e:e.split(".")}function pt(e){return ve(e)?e.join("."):e}function Qi(e,t){let n=[],r=!1;const a=(s,i,o)=>{if(!!se(s))if(!i[o])n.push(s);else{let l=i[o];const u=s[l];if(!se(u))return;if(o===i.length-1&&(de(u)||lr(u)||Bi(u)))n.push(Ui(u));else if(ve(u)){r=!0;for(let d=0,h=u.length;d<h;d+=1)a(u[d],i,o+1)}else i.length&&a(u,i,o+1)}};return a(e,de(t)?t.split("."):t,0),r?n:n[0]}const Gi={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Ki={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Xi={location:0,threshold:.6,distance:100},Ji={useExtendedSearch:!1,getFn:Qi,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var U={...Ki,...Gi,...Xi,...Ji};const Zi=/[^ ]+/g;function el(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(a){const s=a.match(Zi).length;if(n.has(s))return n.get(s);const i=1/Math.pow(s,.5*e),o=parseFloat(Math.round(i*r)/r);return n.set(s,o),o},clear(){n.clear()}}}class Wt{constructor({getFn:t=U.getFn,fieldNormWeight:n=U.fieldNormWeight}={}){this.norm=el(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,de(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();de(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!se(t)||ut(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((a,s)=>{let i=a.getFn?a.getFn(t):this.getFn(t,a.path);if(!!se(i)){if(ve(i)){let o=[];const l=[{nestedArrIndex:-1,value:i}];for(;l.length;){const{nestedArrIndex:u,value:d}=l.pop();if(!!se(d))if(de(d)&&!ut(d)){let h={v:d,i:u,n:this.norm.get(d)};o.push(h)}else ve(d)&&d.forEach((h,v)=>{l.push({nestedArrIndex:v,value:h})})}r.$[s]=o}else if(de(i)&&!ut(i)){let o={v:i,n:this.norm.get(i)};r.$[s]=o}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function fr(e,t,{getFn:n=U.getFn,fieldNormWeight:r=U.fieldNormWeight}={}){const a=new Wt({getFn:n,fieldNormWeight:r});return a.setKeys(e.map(cr)),a.setSources(t),a.create(),a}function tl(e,{getFn:t=U.getFn,fieldNormWeight:n=U.fieldNormWeight}={}){const{keys:r,records:a}=e,s=new Wt({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(a),s}function qe(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:a=U.distance,ignoreLocation:s=U.ignoreLocation}={}){const i=t/e.length;if(s)return i;const o=Math.abs(r-n);return a?i+o/a:o?1:i}function nl(e=[],t=U.minMatchCharLength){let n=[],r=-1,a=-1,s=0;for(let i=e.length;s<i;s+=1){let o=e[s];o&&r===-1?r=s:!o&&r!==-1&&(a=s-1,a-r+1>=t&&n.push([r,a]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const _e=32;function rl(e,t,n,{location:r=U.location,distance:a=U.distance,threshold:s=U.threshold,findAllMatches:i=U.findAllMatches,minMatchCharLength:o=U.minMatchCharLength,includeMatches:l=U.includeMatches,ignoreLocation:u=U.ignoreLocation}={}){if(t.length>_e)throw new Error(Wi(_e));const d=t.length,h=e.length,v=Math.max(0,Math.min(r,h));let p=s,k=v;const S=o>1||l,O=S?Array(h):[];let P;for(;(P=e.indexOf(t,k))>-1;){let x=qe(t,{currentLocation:P,expectedLocation:v,distance:a,ignoreLocation:u});if(p=Math.min(x,p),k=P+d,S){let M=0;for(;M<d;)O[P+M]=1,M+=1}}k=-1;let F=[],D=1,V=d+h;const W=1<<d-1;for(let x=0;x<d;x+=1){let M=0,m=V;for(;M<m;)qe(t,{errors:x,currentLocation:v+m,expectedLocation:v,distance:a,ignoreLocation:u})<=p?M=m:V=m,m=Math.floor((V-M)/2+M);V=m;let y=Math.max(1,v-m+1),c=i?h:Math.min(v+m,h)+d,b=Array(c+2);b[c+1]=(1<<x)-1;for(let _=c;_>=y;_-=1){let C=_-1,E=n[e.charAt(C)];if(S&&(O[C]=+!!E),b[_]=(b[_+1]<<1|1)&E,x&&(b[_]|=(F[_+1]|F[_])<<1|1|F[_+1]),b[_]&W&&(D=qe(t,{errors:x,currentLocation:C,expectedLocation:v,distance:a,ignoreLocation:u}),D<=p)){if(p=D,k=C,k<=v)break;y=Math.max(1,2*v-k)}}if(qe(t,{errors:x+1,currentLocation:v,expectedLocation:v,distance:a,ignoreLocation:u})>p)break;F=b}const H={isMatch:k>=0,score:Math.max(.001,D)};if(S){const x=nl(O,o);x.length?l&&(H.indices=x):H.isMatch=!1}return H}function al(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const a=e.charAt(n);t[a]=(t[a]||0)|1<<r-n-1}return t}class mr{constructor(t,{location:n=U.location,threshold:r=U.threshold,distance:a=U.distance,includeMatches:s=U.includeMatches,findAllMatches:i=U.findAllMatches,minMatchCharLength:o=U.minMatchCharLength,isCaseSensitive:l=U.isCaseSensitive,ignoreLocation:u=U.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:a,includeMatches:s,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(v,p)=>{this.chunks.push({pattern:v,alphabet:al(v),startIndex:p})},h=this.pattern.length;if(h>_e){let v=0;const p=h%_e,k=h-p;for(;v<k;)d(this.pattern.substr(v,_e),v),v+=_e;if(p){const S=h-_e;d(this.pattern.substr(S),S)}}else d(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let k={isMatch:!0,score:0};return r&&(k.indices=[[0,t.length-1]]),k}const{location:a,distance:s,threshold:i,findAllMatches:o,minMatchCharLength:l,ignoreLocation:u}=this.options;let d=[],h=0,v=!1;this.chunks.forEach(({pattern:k,alphabet:S,startIndex:O})=>{const{isMatch:P,score:F,indices:D}=rl(t,k,S,{location:a+O,distance:s,threshold:i,findAllMatches:o,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});P&&(v=!0),h+=F,P&&D&&(d=[...d,...D])});let p={isMatch:v,score:v?h/this.chunks.length:1};return v&&r&&(p.indices=d),p}}class ke{constructor(t){this.pattern=t}static isMultiMatch(t){return vn(t,this.multiRegex)}static isSingleMatch(t){return vn(t,this.singleRegex)}search(){}}function vn(e,t){const n=e.match(t);return n?n[1]:null}class sl extends ke{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class ol extends ke{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class il extends ke{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class ll extends ke{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class ul extends ke{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class dl extends ke{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class hr extends ke{constructor(t,{location:n=U.location,threshold:r=U.threshold,distance:a=U.distance,includeMatches:s=U.includeMatches,findAllMatches:i=U.findAllMatches,minMatchCharLength:o=U.minMatchCharLength,isCaseSensitive:l=U.isCaseSensitive,ignoreLocation:u=U.ignoreLocation}={}){super(t),this._bitapSearch=new mr(t,{location:n,threshold:r,distance:a,includeMatches:s,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class vr extends ke{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const a=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,a.push([r,n-1]);const i=!!a.length;return{isMatch:i,score:i?0:1,indices:a}}}const yt=[sl,vr,il,ll,dl,ul,ol,hr],gn=yt.length,cl=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,fl="|";function ml(e,t={}){return e.split(fl).map(n=>{let r=n.trim().split(cl).filter(s=>s&&!!s.trim()),a=[];for(let s=0,i=r.length;s<i;s+=1){const o=r[s];let l=!1,u=-1;for(;!l&&++u<gn;){const d=yt[u];let h=d.isMultiMatch(o);h&&(a.push(new d(h,t)),l=!0)}if(!l)for(u=-1;++u<gn;){const d=yt[u];let h=d.isSingleMatch(o);if(h){a.push(new d(h,t));break}}}return a})}const hl=new Set([hr.type,vr.type]);class vl{constructor(t,{isCaseSensitive:n=U.isCaseSensitive,includeMatches:r=U.includeMatches,minMatchCharLength:a=U.minMatchCharLength,ignoreLocation:s=U.ignoreLocation,findAllMatches:i=U.findAllMatches,location:o=U.location,threshold:l=U.threshold,distance:u=U.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:a,findAllMatches:i,ignoreLocation:s,location:o,threshold:l,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=ml(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:a}=this.options;t=a?t:t.toLowerCase();let s=0,i=[],o=0;for(let l=0,u=n.length;l<u;l+=1){const d=n[l];i.length=0,s=0;for(let h=0,v=d.length;h<v;h+=1){const p=d[h],{isMatch:k,indices:S,score:O}=p.search(t);if(k){if(s+=1,o+=O,r){const P=p.constructor.type;hl.has(P)?i=[...i,...S]:i.push(S)}}else{o=0,s=0,i.length=0;break}}if(s){let h={isMatch:!0,score:o/s};return r&&(h.indices=i),h}}return{isMatch:!1,score:1}}}const bt=[];function gl(...e){bt.push(...e)}function wt(e,t){for(let n=0,r=bt.length;n<r;n+=1){let a=bt[n];if(a.condition(e,t))return new a(e,t)}return new mr(e,t)}const Ze={AND:"$and",OR:"$or"},kt={PATH:"$path",PATTERN:"$val"},xt=e=>!!(e[Ze.AND]||e[Ze.OR]),pl=e=>!!e[kt.PATH],yl=e=>!ve(e)&&ur(e)&&!xt(e),pn=e=>({[Ze.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function gr(e,t,{auto:n=!0}={}){const r=a=>{let s=Object.keys(a);const i=pl(a);if(!i&&s.length>1&&!xt(a))return r(pn(a));if(yl(a)){const l=i?a[kt.PATH]:s[0],u=i?a[kt.PATTERN]:a[l];if(!de(u))throw new Error(Vi(l));const d={keyId:pt(l),pattern:u};return n&&(d.searcher=wt(u,t)),d}let o={children:[],operator:s[0]};return s.forEach(l=>{const u=a[l];ve(u)&&u.forEach(d=>{o.children.push(r(d))})}),o};return xt(e)||(e=pn(e)),r(e)}function bl(e,{ignoreFieldNorm:t=U.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:a,norm:s,score:i})=>{const o=a?a.weight:null;r*=Math.pow(i===0&&o?Number.EPSILON:i,(o||1)*(t?1:s))}),n.score=r})}function wl(e,t){const n=e.matches;t.matches=[],se(n)&&n.forEach(r=>{if(!se(r.indices)||!r.indices.length)return;const{indices:a,value:s}=r;let i={indices:a,value:s};r.key&&(i.key=r.key.src),r.idx>-1&&(i.refIndex=r.idx),t.matches.push(i)})}function kl(e,t){t.score=e.score}function xl(e,t,{includeMatches:n=U.includeMatches,includeScore:r=U.includeScore}={}){const a=[];return n&&a.push(wl),r&&a.push(kl),e.map(s=>{const{idx:i}=s,o={item:t[i],refIndex:i};return a.length&&a.forEach(l=>{l(s,o)}),o})}class Le{constructor(t,n={},r){this.options={...U,...n},this.options.useExtendedSearch,this._keyStore=new Yi(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof Wt))throw new Error(Hi);this._myIndex=n||fr(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){!se(t)||(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,a=this._docs.length;r<a;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,a-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:a,shouldSort:s,sortFn:i,ignoreFieldNorm:o}=this.options;let l=de(t)?de(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return bl(l,{ignoreFieldNorm:o}),s&&l.sort(i),lr(n)&&n>-1&&(l=l.slice(0,n)),xl(l,this._docs,{includeMatches:r,includeScore:a})}_searchStringList(t){const n=wt(t,this.options),{records:r}=this._myIndex,a=[];return r.forEach(({v:s,i,n:o})=>{if(!se(s))return;const{isMatch:l,score:u,indices:d}=n.searchIn(s);l&&a.push({item:s,idx:i,matches:[{score:u,value:s,norm:o,indices:d}]})}),a}_searchLogical(t){const n=gr(t,this.options),r=(o,l,u)=>{if(!o.children){const{keyId:h,searcher:v}=o,p=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(l,h),searcher:v});return p&&p.length?[{idx:u,item:l,matches:p}]:[]}const d=[];for(let h=0,v=o.children.length;h<v;h+=1){const p=o.children[h],k=r(p,l,u);if(k.length)d.push(...k);else if(o.operator===Ze.AND)return[]}return d},a=this._myIndex.records,s={},i=[];return a.forEach(({$:o,i:l})=>{if(se(o)){let u=r(n,o,l);u.length&&(s[l]||(s[l]={idx:l,item:o,matches:[]},i.push(s[l])),u.forEach(({matches:d})=>{s[l].matches.push(...d)}))}}),i}_searchObjectList(t){const n=wt(t,this.options),{keys:r,records:a}=this._myIndex,s=[];return a.forEach(({$:i,i:o})=>{if(!se(i))return;let l=[];r.forEach((u,d)=>{l.push(...this._findMatches({key:u,value:i[d],searcher:n}))}),l.length&&s.push({idx:o,item:i,matches:l})}),s}_findMatches({key:t,value:n,searcher:r}){if(!se(n))return[];let a=[];if(ve(n))n.forEach(({v:s,i,n:o})=>{if(!se(s))return;const{isMatch:l,score:u,indices:d}=r.searchIn(s);l&&a.push({score:u,key:t,value:s,idx:i,norm:o,indices:d})});else{const{v:s,n:i}=n,{isMatch:o,score:l,indices:u}=r.searchIn(s);o&&a.push({score:l,key:t,value:s,norm:i,indices:u})}return a}}Le.version="6.6.2";Le.createIndex=fr;Le.parseIndex=tl;Le.config=U;Le.parseQuery=gr;gl(vl);function pr(e,t,n,r=[]){const a=e||A(null),s=t||A([]),i=n||A([]),o={threshold:.2,keys:["title",...r]},l=(h,v)=>h.filter(p=>v.includes(p)).length,u=()=>{const h=s.value;if(!h)return[];const v=new Le([...h],o),k=(a.value&&h.length?v.search(a.value).map(S=>S.item):h).sort((S,O)=>{S.order>O.order});return i.value&&i.value.length?k.filter(S=>S.tags&&l(S.tags.map(O=>O.uid),i.value)):k},d=N(()=>u());return{searchRef:e,tagsRef:n,filteredList:d}}var _t={exports:{}};(function(e,t){(function(n,r){{var a=r();e&&e.exports&&(t=e.exports=a),t.randomColor=a}})(Cr,function(){var n=null,r={};P();var a=[],s=function(x){if(x=x||{},x.seed!==void 0&&x.seed!==null&&x.seed===parseInt(x.seed,10))n=x.seed;else if(typeof x.seed=="string")n=W(x.seed);else{if(x.seed!==void 0&&x.seed!==null)throw new TypeError("The seed value must be an integer or string");n=null}var M,m,y;if(x.count!==null&&x.count!==void 0){for(var c=x.count,b=[],g=0;g<x.count;g++)a.push(!1);for(x.count=null;c>b.length;){var _=s(x);n!==null&&(x.seed=n),b.push(_)}return x.count=c,b}return M=i(x),m=o(M,x),y=l(M,m,x),u([M,m,y],x)};function i(x){if(a.length>0){var M=H(x.hue),m=k(M),y=(M[1]-M[0])/a.length,c=parseInt((m-M[0])/y);a[c]===!0?c=(c+2)%a.length:a[c]=!0;var b=(M[0]+c*y)%359,g=(M[0]+(c+1)*y)%359;return M=[b,g],m=k(M),m<0&&(m=360+m),m}else{var M=h(x.hue);return m=k(M),m<0&&(m=360+m),m}}function o(x,M){if(M.hue==="monochrome")return 0;if(M.luminosity==="random")return k([0,100]);var m=v(x),y=m[0],c=m[1];switch(M.luminosity){case"bright":y=55;break;case"dark":y=c-10;break;case"light":c=55;break}return k([y,c])}function l(x,M,m){var y=d(x,M),c=100;switch(m.luminosity){case"dark":c=y+20;break;case"light":y=(c+y)/2;break;case"random":y=0,c=100;break}return k([y,c])}function u(x,M){switch(M.format){case"hsvArray":return x;case"hslArray":return V(x);case"hsl":var m=V(x);return"hsl("+m[0]+", "+m[1]+"%, "+m[2]+"%)";case"hsla":var y=V(x),g=M.alpha||Math.random();return"hsla("+y[0]+", "+y[1]+"%, "+y[2]+"%, "+g+")";case"rgbArray":return F(x);case"rgb":var c=F(x);return"rgb("+c.join(", ")+")";case"rgba":var b=F(x),g=M.alpha||Math.random();return"rgba("+b.join(", ")+", "+g+")";default:return S(x)}}function d(x,M){for(var m=p(x).lowerBounds,y=0;y<m.length-1;y++){var c=m[y][0],b=m[y][1],g=m[y+1][0],_=m[y+1][1];if(M>=c&&M<=g){var C=(_-b)/(g-c),E=b-C*c;return C*M+E}}return 0}function h(x){if(typeof parseInt(x)=="number"){var M=parseInt(x);if(M<360&&M>0)return[M,M]}if(typeof x=="string"){if(r[x]){var m=r[x];if(m.hueRange)return m.hueRange}else if(x.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var y=D(x)[0];return[y,y]}}return[0,360]}function v(x){return p(x).saturationRange}function p(x){x>=334&&x<=360&&(x-=360);for(var M in r){var m=r[M];if(m.hueRange&&x>=m.hueRange[0]&&x<=m.hueRange[1])return r[M]}return"Color not found"}function k(x){if(n===null){var M=.618033988749895,m=Math.random();return m+=M,m%=1,Math.floor(x[0]+m*(x[1]+1-x[0]))}else{var y=x[1]||1,c=x[0]||0;n=(n*9301+49297)%233280;var b=n/233280;return Math.floor(c+b*(y-c))}}function S(x){var M=F(x);function m(c){var b=c.toString(16);return b.length==1?"0"+b:b}var y="#"+m(M[0])+m(M[1])+m(M[2]);return y}function O(x,M,m){var y=m[0][0],c=m[m.length-1][0],b=m[m.length-1][1],g=m[0][1];r[x]={hueRange:M,lowerBounds:m,saturationRange:[y,c],brightnessRange:[b,g]}}function P(){O("monochrome",null,[[0,0],[100,0]]),O("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),O("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),O("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),O("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),O("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),O("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),O("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function F(x){var M=x[0];M===0&&(M=1),M===360&&(M=359),M=M/360;var m=x[1]/100,y=x[2]/100,c=Math.floor(M*6),b=M*6-c,g=y*(1-m),_=y*(1-b*m),C=y*(1-(1-b)*m),E=256,Q=256,ne=256;switch(c){case 0:E=y,Q=C,ne=g;break;case 1:E=_,Q=y,ne=g;break;case 2:E=g,Q=y,ne=C;break;case 3:E=g,Q=_,ne=y;break;case 4:E=C,Q=g,ne=y;break;case 5:E=y,Q=g,ne=_;break}var st=[Math.floor(E*255),Math.floor(Q*255),Math.floor(ne*255)];return st}function D(x){x=x.replace(/^#/,""),x=x.length===3?x.replace(/(.)/g,"$1$1"):x;var M=parseInt(x.substr(0,2),16)/255,m=parseInt(x.substr(2,2),16)/255,y=parseInt(x.substr(4,2),16)/255,c=Math.max(M,m,y),b=c-Math.min(M,m,y),g=c?b/c:0;switch(c){case M:return[60*((m-y)/b%6)||0,g,c];case m:return[60*((y-M)/b+2)||0,g,c];case y:return[60*((M-m)/b+4)||0,g,c]}}function V(x){var M=x[0],m=x[1]/100,y=x[2]/100,c=(2-m)*y;return[M,Math.round(m*y/(c<1?c:2-c)*1e4)/100,c/2*100]}function W(x){for(var M=0,m=0;m!==x.length&&!(M>=Number.MAX_SAFE_INTEGER);m++)M+=x.charCodeAt(m);return M}function H(x){if(isNaN(x)){if(typeof x=="string"){if(r[x]){var m=r[x];if(m.hueRange)return m.hueRange}else if(x.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var y=D(x)[0];return p(y).hueRange}}}else{var M=parseInt(x);if(M<360&&M>0)return p(x).hueRange}return[0,360]}return s})})(_t,_t.exports);const _l=_t.exports,Sl={class:"flex items-center justify-center tag-select"},Tl={class:"w-full px-1 pt-2 pb-5"},$l=["onClick"],Ml={class:"ml-2"},Ol={class:"mb-0"},Cl={key:0},El={key:1,class:"text-center"},Dl=f("span",null," This person doesn't exists",-1),Il=[Dl],Al=["onFocus"],Pl=f("span",{class:"text-xs"},[f("i",{class:"fa fa-user"})],-1),Ll=["title"],Rl={__name:"PersonSelect",props:{items:{type:Array,default(){return[]}},modelValue:{type:Array,default(){}},limit:{type:Number,default:2},multiple:Boolean,placeholder:{type:String,default:"Add items"},allowAdd:{type:Boolean,default:!0}},emits:{"update:modelValue":Array,added:Object,selected:Object},setup(e,{emit:t}){const n=e,r=ie({cursor:0,isOpen:!1}),a=A([]);X(()=>[...n.modelValue],m=>{a.value=m.map(y=>(y.color=y.color||_l({luminosity:"dark"}),y))},{immediate:!0});const s=A(null),i=A(null),o=m=>m.split(" ").map(y=>y[0]).join(""),l=A(""),{items:u,allowAdd:d}=ue(n),h=N(()=>a&&a.value.map(m=>m.name).join(" ")),v=N(()=>a&&a.value.slice(n.limit).map(m=>m.name).join(" ")),{filteredList:p}=pr(l,u,null,["name"]),k=m=>a.value.find(y=>y.uid==m),S=()=>{s.value&&s.value.focus()},O=m=>{m.target.click()};X(()=>p.value,m=>{r.cursor>p.value.length-1&&(r.cursor=0)});const P=N(()=>r.cursor<=p.value.length?p.value[r.cursor]:""),F=A(null),D=()=>{F.value.scrollTop=0},V=()=>{r.cursor>0&&(r.cursor=r.cursor-1)},W=()=>{r.cursor+1<p.value.length&&(r.cursor=r.cursor+1)},H=()=>{l.value&&(t("added",{name:l.value}),l.value="")},x=m=>{if(p.value.length){const y=m||p.value[r.cursor];M(y)}else H()},M=m=>{const y=a.value.findIndex(c=>m.uid==c.uid);y<0&&n.multiple?a.value.push(m):y<0&&!n.multiple?a.value=[m]:a.value.splice(y,1),n.multiple?s.value.focus():r.isOpen=!1,t("update:modelValue",a.value)};return(m,y)=>{const c=K("el-avatar"),b=K("el-popover");return w(),$("div",Sl,[R(b,{modelValue:r.isOpen,"onUpdate:modelValue":y[6]||(y[6]=g=>r.isOpen=g),placement:"bottom-end","popper-class":"tag-select",width:240,"show-arrow":!1,onAfterEnter:y[7]||(y[7]=g=>S())},{reference:I(()=>[f("button",{ref_key:"button",ref:i,class:L([{"text-gray-500":T(h)},"flex items-center w-full h-full space-x-1 text-xs focus:outline-none"]),onMousedown:y[5]||(y[5]=J(()=>{},["prevent"])),onFocus:J(O,["prevent"])},[a.value.length?j("",!0):(w(),Y(c,{key:0,size:24,class:"text-xs transition-colors hover:bg-gray-500"},{default:I(()=>[Pl]),_:1})),(w(!0),$(Z,null,ee(a.value.slice(0,e.limit),g=>(w(),Y(c,{key:g.name,style:Er({background:g.color}),size:24,title:g.name,src:g.photoUrl,class:"mr-1 text-white"},{default:I(()=>[te(B(o(g.name)),1)]),_:2},1032,["style","title","src"]))),128)),T(v)?(w(),$("span",{key:1,title:T(v),class:"px-2 py-1 mr-1 text-white bg-gray-500 rounded-md"}," + "+B(a.value.slice(e.limit).length),9,Ll)):j("",!0)],42,Al)]),default:I(()=>[f("div",Tl,[re(f("input",{class:"w-full h-8 px-2 border-2 border-gray-100 rounded-md focus:outline-none focus:border-gray-200",type:"text",placeholder:"Select or create a person","onUpdate:modelValue":y[0]||(y[0]=g=>l.value=g),ref_key:"input",ref:s,onClick:y[1]||(y[1]=J(()=>{},["stop"])),onInput:D,onKeydown:[y[2]||(y[2]=le(g=>x(),["enter"])),y[3]||(y[3]=le(J(g=>V(),["prevent"]),["up"])),y[4]||(y[4]=le(J(g=>W(),["prevent"]),["down"]))]},null,544),[[be,l.value,void 0,{trim:!0}]]),f("div",{class:"w-full mt-2 space-y-1 overflow-auto items-container max-h-48 ic-scroller",ref_key:"container",ref:F},[(w(!0),$(Z,null,ee(T(p),g=>(w(),$("div",{key:g,class:L(["flex items-center px-2 py-2 transition-colors rounded-sm cursor-pointer",[T(P)==g&&"bg-gray-500 text-white",k(g.uid)?"bg-gray-200 hover:bg-gray-500 hover:text-white":"hover:bg-gray-500 hover:text-white"]]),onClick:J(_=>x(g),["stop"])},[R(c,{src:g.photoUrl,size:32},{default:I(()=>[te(B(o(g.name)),1)]),_:2},1032,["src"]),f("div",Ml,[f("h4",Ol,B(g.name),1),f("small",null,B(g.email),1)])],10,$l))),128))],512),l.value&&T(p).length==0&&T(d)?(w(),$("div",Cl,[f("button",{class:"w-full h-8 px-2",onClick:H},' Add person: "'+B(l.value)+'" ',1)])):T(p).length==0&&l.value?(w(),$("div",El,Il)):j("",!0)])]),_:1},8,["modelValue"])])}}};const Nl={class:"flex items-center justify-center tag-select"},jl={key:0},Ul={class:"flex items-center mb-5"},Bl=f("i",{class:"fa fa-chevron-left"},null,-1),Fl=[Bl],Hl=f("div",{class:"ml-2 font-bold"}," Edit Tag",-1),Vl={class:"mb-6 text-left"},Wl=f("label",{for:"",class:"inline-block mb-2 font-bold"},"Tag Name",-1),zl={class:"mt-2"},ql=f("label",{for:"",class:"inline-block mb-2 font-bold"},"Pick a color",-1),Yl={class:"grid grid-cols-4"},Ql=["onClick"],Gl={class:"flex justify-end"},Kl={key:1,class:"w-full px-1 pt-2 pb-5"},Xl=["onClick"],Jl={class:"w-full h-full ml-2"},Zl=["onClick"],eu=f("i",{class:"fa fa-edit"},null,-1),tu=[eu],nu={key:0},ru={key:1,class:"text-center"},au=f("span",null," This tag doesn't exists",-1),su=[au],ou=["onFocus"],iu=f("i",{class:"cursor-pointer fa fa-tags"},null,-1),lu={key:0},uu=["onClick"],du=f("i",{class:"px-2 fa fa-times"},null,-1),cu=[du],fu=["title"],mu={__name:"TagsSelect",props:{tags:{type:Array,default(){return[]}},modelValue:{type:Array,default(){}},limit:{type:Number,default:2},multiple:Boolean,placeholder:{type:String,default:"Add tags"},allowAdd:{type:Boolean,default:!0}},emits:{"update:modelValue":Array,added:Object,selected:Object},setup(e,{emit:t}){const n=e,r=A([]),a=()=>{r.value=n.modelValue.map(g=>{const _=n.tags.find(C=>C.uid==g.uid);return(!g.colors||_&&_.colors&&_.colors[0]!=g.colors[0])&&(g.colors=_?_.colors||[]:[]),g})};X(()=>[...n.modelValue],()=>{a()},{immediate:!0}),X(()=>n.tags,()=>{a()});const s=A(null),i=A(null),o=ie({cursor:-1,isOpen:!1,selectedTag:null,tagColors:[["bg-green-200","bg-green-400","hover:border-green-600"],["bg-blue-200","bg-blue-400","hover:border-blue-600"],["bg-red-200","bg-red-400","hover:border-red-600"],["bg-yellow-200","bg-yellow-400","hover:border-yellow-600"],["bg-purple-200","bg-purple-400","hover:border-purple-600"],["bg-pink-200","bg-pink-400","hover:border-pink-600"],["bg-indigo-200","bg-indigo-400","hover:border-indigo-600"],["bg-gray-200","bg-gray-400","hover:border-gray-600"]]}),l=A(""),{tags:u,allowAdd:d}=ue(n);N(()=>r&&r.value.map(g=>g.name).join(" "));const h=N(()=>r&&r.value.slice(n.limit).map(g=>g.name).join(" ")),{filteredList:v}=useFuseSearch(l,u,A([]),["name"]),p=g=>r.value.find(_=>_.uid==g),k=()=>{s.value&&s.value.focus()},S=g=>{g.target.click()};X(()=>v.value,g=>{o.cursor>v.value.length-1&&(o.cursor=0)});const O=N(()=>o.cursor<=v.value.length?v.value[o.cursor]:""),P=A(null),F=()=>{P.value.scrollTop=0},D=()=>{o.cursor>-1&&P.value.querySelector(`.select-item-${o.cursor}`).scrollIntoView({behavior:"smooth"})},V=()=>{o.cursor>-1&&(o.cursor=o.cursor-1,D())},W=()=>{o.cursor+1<v.value.length&&(o.cursor=o.cursor+1,D())},H=()=>{l.value&&(t("added",{name:l.value}),l.value="")},{update:x,destroy:M}=useCollection(),m=g=>{g.uid&&x("tags",g).then(()=>{ElNotification({message:"Tag updated",type:"success"}),o.selectedTag=null})},y=async g=>{const _=await ElMessageBox.confirm(`Are you sure you want to delete the tag: "${g.name}"?<br> This tag won't be deleted from already saved tasks`,"Delete Tag",{dangerouslyUseHTMLString:!0});g.uid&&_&&M("tags",g).then(()=>{ElNotification({message:"Tag deleted",type:"success"}),o.selectedTag=null})},c=g=>{if(v.value.length){const _=g||v.value[o.cursor];b(_)}else H()},b=g=>{const _=r.value.findIndex(C=>g.uid==C.uid);_<0&&n.multiple?r.value.push(g):_<0&&!n.multiple?r.value=[g]:r.value.splice(_,1),n.multiple?s.value.focus():o.isOpen=!1,t("update:modelValue",r.value)};return(g,_)=>{const C=K("el-popover");return w(),$("div",Nl,[R(C,{modelValue:o.isOpen,"onUpdate:modelValue":_[10]||(_[10]=E=>o.isOpen=E),placement:"bottom-end","popper-class":"tag-select dark:bg-gray-900 dark:text-gray-300",width:240,"show-arrow":!1,onHide:_[11]||(_[11]=E=>o.selectedTag=null),onAfterEnter:_[12]||(_[12]=E=>k())},{reference:I(()=>[f("button",{ref_key:"button",ref:i,class:L([{"text-gray-500":!0},"flex items-center h-full space-x-1 text-xs focus:outline-none dark:bg-transparent dark:text-gray-300"]),onMousedown:_[9]||(_[9]=J(()=>{},["prevent"])),onFocus:J(S,["prevent"])},[iu,r.value.length?j("",!0):(w(),$("span",lu,B(e.placeholder),1)),(w(!0),$(Z,null,ee(r.value.slice(0,e.limit),E=>(w(),$("span",{key:E.name,class:L(["flex items-center pl-2 mr-1 text-white bg-gray-500 rounded-md",E.colors])},[te(B(E.name)+" ",1),f("button",{onClick:J(Q=>b(E),["prevent","stop"]),class:"py-1 transition-colors hover:bg-gray-700 rounded-r-md"},cu,8,uu)],2))),128)),T(h)?(w(),$("span",{key:1,title:T(h),class:"px-2 py-1 mr-1 text-white bg-gray-500 rounded-md"}," + "+B(r.value.slice(e.limit).length),9,fu)):j("",!0)],40,ou)]),default:I(()=>[o.selectedTag?(w(),$("div",jl,[f("div",Ul,[f("button",{onClick:_[0]||(_[0]=E=>o.selectedTag=null),class:"px-2 py-1 rounded-md hover:bg-gray-200 focus:outline-none"},Fl),Hl]),f("div",Vl,[Wl,re(f("input",{class:"w-full h-8 px-2 border-2 border-gray-100 rounded-md dark:bg-gray-900 focus:outline-none focus:border-gray-200",type:"text",placeholder:"Add or create a tag","onUpdate:modelValue":_[1]||(_[1]=E=>o.selectedTag.name=E),ref_key:"input",ref:s},null,512),[[be,o.selectedTag.name,void 0,{trim:!0}]])]),f("div",zl,[ql,f("div",Yl,[(w(!0),$(Z,null,ee(o.tagColors,E=>(w(),$("div",{key:E[0],class:L(["flex w-10 h-10 my-2 overflow-hidden rounded-full cursor-pointer",[`border-2 border-transparent ${E.hover}`,o.selectedTag.colors&&o.selectedTag.colors[0]==E[0]&&"border-gray-600"]]),onClick:Q=>o.selectedTag.colors=E},[f("div",{class:L([E[0],"w-1/2 h-full"])},null,2),f("div",{class:L([E[1],"w-1/2 h-full"])},null,2)],10,Ql))),128))])]),f("div",Gl,[f("button",{onClick:_[2]||(_[2]=E=>y(o.selectedTag)),class:"px-5 py-2 mr-2 text-white transition-colors bg-red-400 rounded-md focus:outline-none hover:bg-red-500"}," Delete "),f("button",{onClick:_[3]||(_[3]=E=>m(o.selectedTag)),class:"px-5 py-2 text-white transition-colors bg-green-400 rounded-md focus:outline-none hover:bg-green-500"}," Save ")])])):(w(),$("div",Kl,[re(f("input",{class:"w-full h-8 px-2 border-2 border-gray-100 rounded-md dark:bg-gray-900 dark:focus:border-gray-400 dark:border-gray-500 dark:text-gray-300 focus:outline-none focus:border-gray-200",type:"text",placeholder:"Add or create a tag","onUpdate:modelValue":_[4]||(_[4]=E=>l.value=E),ref_key:"input",ref:s,onClick:_[5]||(_[5]=J(()=>{},["stop"])),onInput:F,onKeydown:[_[6]||(_[6]=le(E=>c(),["enter"])),_[7]||(_[7]=le(J(E=>V(),["prevent"]),["up"])),_[8]||(_[8]=le(J(E=>W(),["prevent"]),["down"]))]},null,544),[[be,l.value,void 0,{trim:!0}]]),f("div",{class:"w-full pr-2 mt-2 space-y-1 overflow-auto tags-container max-h-48 ic-scroller",ref_key:"container",ref:P},[(w(!0),$(Z,null,ee(T(v),(E,Q)=>(w(),$("div",{key:E,class:L(["flex px-2 py-2 capitalize transition-colors rounded-md cursor-pointer fnnt-bold",[`select-item-${Q}`,T(O)==E&&"bg-gray-500 text-white",p(E.uid)?"bg-gray-200 hover:bg-gray-200 ":"hover:bg-gray-200 dark:hover:bg-gray-600 dark:hover:text-gray-50"]]),onClick:J(ne=>c(E),["stop"])},[f("div",{class:L(["w-2 h-5",E.colors&&E.colors[1]])},null,2),f("div",Jl,B(E.name),1),f("div",{onClick:J(ne=>o.selectedTag=E,["prevent","stop"]),class:"flex items-center justify-center w-10 px-2 py-1 transition-colors rounded-full hover:bg-gray-700 hover:text-white"},tu,8,Zl)],10,Xl))),128))],512),l.value&&T(v).length==0&&T(d)?(w(),$("div",nu,[f("button",{class:"w-full h-8 px-2",onClick:H},' Add tag: "'+B(l.value)+'"',1)])):T(v).length==0&&l.value?(w(),$("div",ru,su)):j("",!0)]))]),_:1},8,["modelValue"])])}}};function Se(e){var t;const n=he(e);return(t=n==null?void 0:n.$el)!=null?t:n}const yr=Dt?window:void 0,hu=Dt?window.document:void 0;function Ie(...e){let t,n,r,a;if(Nn(e[0])||Array.isArray(e[0])?([n,r,a]=e,t=yr):[t,n,r,a]=e,!t)return Te;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const s=[],i=()=>{s.forEach(d=>d()),s.length=0},o=(d,h,v)=>(d.addEventListener(h,v,a),()=>d.removeEventListener(h,v,a)),l=X(()=>Se(t),d=>{i(),d&&s.push(...n.flatMap(h=>r.map(v=>o(d,h,v))))},{immediate:!0,flush:"post"}),u=()=>{l(),i()};return He(u),u}function vu(e,t,n={}){const{window:r=yr,ignore:a=[],capture:s=!0,detectIframe:i=!1}=n;if(!r)return;let o=!0,l;const u=p=>a.some(k=>{if(typeof k=="string")return Array.from(r.document.querySelectorAll(k)).some(S=>S===p.target||p.composedPath().includes(S));{const S=Se(k);return S&&(p.target===S||p.composedPath().includes(S))}}),d=p=>{r.clearTimeout(l);const k=Se(e);if(!(!k||k===p.target||p.composedPath().includes(k))){if(p.detail===0&&(o=!u(p)),!o){o=!0;return}t(p)}},h=[Ie(r,"click",d,{passive:!0,capture:s}),Ie(r,"pointerdown",p=>{const k=Se(e);k&&(o=!p.composedPath().includes(k)&&!u(p))},{passive:!0}),Ie(r,"pointerup",p=>{if(p.button===0){const k=p.composedPath();p.composedPath=()=>k,l=r.setTimeout(()=>d(p),50)}},{passive:!0}),i&&Ie(r,"blur",p=>{var k;const S=Se(e);((k=r.document.activeElement)==null?void 0:k.tagName)==="IFRAME"&&!(S!=null&&S.contains(r.document.activeElement))&&t(p)})].filter(Boolean);return()=>h.forEach(p=>p())}function gu(e,t=!1){const n=A(),r=()=>n.value=Boolean(e());return r(),jn(r,t),n}const St=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tt="__vueuse_ssr_handlers__";St[Tt]=St[Tt]||{};St[Tt];function pu(e,t={}){const{document:n=hu,pointerLockOptions:r}=t,a=gu(()=>n&&"pointerLockElement"in n),s=A(),i=A();let o;a.value&&(Ie(n,"pointerlockchange",()=>{var d;const h=(d=n.pointerLockElement)!=null?d:s.value;o&&h===o&&(s.value=n.pointerLockElement,s.value||(o=i.value=null))}),Ie(n,"pointerlockerror",()=>{var d;const h=(d=n.pointerLockElement)!=null?d:s.value;if(o&&h===o){const v=n.pointerLockElement?"release":"acquire";throw new Error(`Failed to ${v} pointer lock.`)}}));async function l(d,h){var v;if(!a.value)throw new Error("Pointer Lock API is not supported by your browser.");if(i.value=d instanceof Event?d.currentTarget:null,o=d instanceof Event?(v=Se(e))!=null?v:i.value:Se(d),!o)throw new Error("Target element undefined.");return o.requestPointerLock(h!=null?h:r),await qt(s).toBe(o)}async function u(){return s.value?(n.exitPointerLock(),await qt(s).toBeNull(),!0):!1}return{isSupported:a,element:s,triggerElement:i,lock:l,unlock:u}}var yn;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(yn||(yn={}));var yu=Object.defineProperty,bn=Object.getOwnPropertySymbols,bu=Object.prototype.hasOwnProperty,wu=Object.prototype.propertyIsEnumerable,wn=(e,t,n)=>t in e?yu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ku=(e,t)=>{for(var n in t||(t={}))bu.call(t,n)&&wn(e,n,t[n]);if(bn)for(var n of bn(t))wu.call(t,n)&&wn(e,n,t[n]);return e};const xu={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};ku({linear:Dr},xu);const _u=It({name:"OnClickOutside",props:["as","options"],emits:["trigger"],setup(e,{slots:t,emit:n}){const r=A();return vu(r,a=>{n("trigger",a)},e.options),()=>{if(t.default)return Un(e.as||"div",{ref:r},t.default())}}});function ae(e){var t;const n=he(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Ce=Dt?window:void 0;function oe(...e){let t,n,r,a;if(Nn(e[0])||Array.isArray(e[0])?([n,r,a]=e,t=Ce):[t,n,r,a]=e,!t)return Te;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const s=[],i=()=>{s.forEach(d=>d()),s.length=0},o=(d,h,v)=>(d.addEventListener(h,v,a),()=>d.removeEventListener(h,v,a)),l=X(()=>ae(t),d=>{i(),d&&s.push(...n.flatMap(h=>r.map(v=>o(d,h,v))))},{immediate:!0,flush:"post"}),u=()=>{l(),i()};return He(u),u}function kn(e,t,n={}){const{window:r=Ce,ignore:a=[],capture:s=!0,detectIframe:i=!1}=n;if(!r)return;let o=!0,l;const u=p=>a.some(k=>{if(typeof k=="string")return Array.from(r.document.querySelectorAll(k)).some(S=>S===p.target||p.composedPath().includes(S));{const S=ae(k);return S&&(p.target===S||p.composedPath().includes(S))}}),d=p=>{r.clearTimeout(l);const k=ae(e);if(!(!k||k===p.target||p.composedPath().includes(k))){if(p.detail===0&&(o=!u(p)),!o){o=!0;return}t(p)}},h=[oe(r,"click",d,{passive:!0,capture:s}),oe(r,"pointerdown",p=>{const k=ae(e);k&&(o=!p.composedPath().includes(k)&&!u(p))},{passive:!0}),oe(r,"pointerup",p=>{if(p.button===0){const k=p.composedPath();p.composedPath=()=>k,l=r.setTimeout(()=>d(p),50)}},{passive:!0}),i&&oe(r,"blur",p=>{var k;const S=ae(e);((k=r.document.activeElement)==null?void 0:k.tagName)==="IFRAME"&&!(S!=null&&S.contains(r.document.activeElement))&&t(p)})].filter(Boolean);return()=>h.forEach(p=>p())}ce.mounted+"",ce.unmounted+"";const Su=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function xn(...e){let t,n,r={};e.length===3?(t=e[0],n=e[1],r=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],r=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:a=Ce,eventName:s="keydown",passive:i=!1}=r,o=Su(t);return oe(a,s,u=>{o(u)&&n(u)},i)}var Tu=Object.defineProperty,_n=Object.getOwnPropertySymbols,$u=Object.prototype.hasOwnProperty,Mu=Object.prototype.propertyIsEnumerable,Sn=(e,t,n)=>t in e?Tu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ou=(e,t)=>{for(var n in t||(t={}))$u.call(t,n)&&Sn(e,n,t[n]);if(_n)for(var n of _n(t))Mu.call(t,n)&&Sn(e,n,t[n]);return e};ce.mounted+"";const Cu=500;function Tn(e,t,n){var r,a;const s=N(()=>ae(e));let i;function o(){i&&(clearTimeout(i),i=void 0)}function l(d){var h,v,p,k;((h=n==null?void 0:n.modifiers)==null?void 0:h.self)&&d.target!==s.value||(o(),(v=n==null?void 0:n.modifiers)!=null&&v.prevent&&d.preventDefault(),(p=n==null?void 0:n.modifiers)!=null&&p.stop&&d.stopPropagation(),i=setTimeout(()=>t(d),(k=n==null?void 0:n.delay)!=null?k:Cu))}const u={capture:(r=n==null?void 0:n.modifiers)==null?void 0:r.capture,once:(a=n==null?void 0:n.modifiers)==null?void 0:a.once};oe(s,"pointerdown",l,u),oe(s,"pointerup",o,u),oe(s,"pointerleave",o,u)}ce.mounted+"";const $t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mt="__vueuse_ssr_handlers__";$t[Mt]=$t[Mt]||{};$t[Mt];function br(e,t=!1){const n=A(),r=()=>n.value=Boolean(e());return r(),jn(r,t),n}function Eu(e){const t=A(!1);return oe(e,"mouseenter",()=>t.value=!0),oe(e,"mouseleave",()=>t.value=!1),t}ce.mounted+"";var $n=Object.getOwnPropertySymbols,Du=Object.prototype.hasOwnProperty,Iu=Object.prototype.propertyIsEnumerable,Au=(e,t)=>{var n={};for(var r in e)Du.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$n)for(var r of $n(e))t.indexOf(r)<0&&Iu.call(e,r)&&(n[r]=e[r]);return n};function Pu(e,t,n={}){const r=n,{window:a=Ce}=r,s=Au(r,["window"]);let i;const o=br(()=>a&&"ResizeObserver"in a),l=()=>{i&&(i.disconnect(),i=void 0)},u=X(()=>ae(e),h=>{l(),o.value&&a&&h&&(i=new ResizeObserver(t),i.observe(h,s))},{immediate:!0,flush:"post"}),d=()=>{l(),u()};return He(d),{isSupported:o,stop:d}}function Lu(e,t={width:0,height:0},n={}){const{window:r=Ce,box:a="content-box"}=n,s=N(()=>{var l,u;return(u=(l=ae(e))==null?void 0:l.namespaceURI)==null?void 0:u.includes("svg")}),i=A(t.width),o=A(t.height);return Pu(e,([l])=>{const u=a==="border-box"?l.borderBoxSize:a==="content-box"?l.contentBoxSize:l.devicePixelContentBoxSize;if(r&&s.value){const d=ae(e);if(d){const h=r.getComputedStyle(d);i.value=parseFloat(h.width),o.value=parseFloat(h.height)}}else if(u){const d=Array.isArray(u)?u:[u];i.value=d.reduce((h,{inlineSize:v})=>h+v,0),o.value=d.reduce((h,{blockSize:v})=>h+v,0)}else i.value=l.contentRect.width,o.value=l.contentRect.height},n),X(()=>ae(e),l=>{i.value=l?t.width:0,o.value=l?t.height:0}),{width:i,height:o}}ce.mounted+"";function Mn(e,{window:t=Ce,scrollTarget:n}={}){const r=A(!1),a=()=>{if(!t)return;const s=t.document,i=ae(e);if(!i)r.value=!1;else{const o=i.getBoundingClientRect();r.value=o.top<=(t.innerHeight||s.documentElement.clientHeight)&&o.left<=(t.innerWidth||s.documentElement.clientWidth)&&o.bottom>=0&&o.right>=0}};return X(()=>ae(e),()=>a(),{immediate:!0,flush:"post"}),t&&oe(n||t,"scroll",a,{capture:!1,passive:!0}),r}ce.mounted+"";const On=1;function Ot(e,t={}){const{throttle:n=0,idle:r=200,onStop:a=Te,onScroll:s=Te,offset:i={left:0,right:0,top:0,bottom:0},eventListenerOptions:o={capture:!1,passive:!0},behavior:l="auto"}=t,u=A(0),d=A(0),h=N({get(){return u.value},set(D){p(D,void 0)}}),v=N({get(){return d.value},set(D){p(void 0,D)}});function p(D,V){var W,H,x;const M=he(e);!M||(x=M instanceof Document?document.body:M)==null||x.scrollTo({top:(W=he(V))!=null?W:v.value,left:(H=he(D))!=null?H:h.value,behavior:he(l)})}const k=A(!1),S=ie({left:!0,right:!1,top:!0,bottom:!1}),O=ie({left:!1,right:!1,top:!1,bottom:!1}),P=Pr(D=>{k.value=!1,O.left=!1,O.right=!1,O.top=!1,O.bottom=!1,a(D)},n+r),F=D=>{const V=D.target===document?D.target.documentElement:D.target,W=V.scrollLeft;O.left=W<u.value,O.right=W>d.value,S.left=W<=0+(i.left||0),S.right=W+V.clientWidth>=V.scrollWidth-(i.right||0)-On,u.value=W;let H=V.scrollTop;D.target===document&&!H&&(H=document.body.scrollTop),O.top=H<d.value,O.bottom=H>d.value,S.top=H<=0+(i.top||0),S.bottom=H+V.clientHeight>=V.scrollHeight-(i.bottom||0)-On,d.value=H,k.value=!0,P(D),s(D)};return oe(e,"scroll",n?Ir(F,n,!0,!1):F,o),{x:h,y:v,isScrolling:k,arrivedState:S,directions:O}}var Ru=Object.defineProperty,Nu=Object.defineProperties,ju=Object.getOwnPropertyDescriptors,Cn=Object.getOwnPropertySymbols,Uu=Object.prototype.hasOwnProperty,Bu=Object.prototype.propertyIsEnumerable,En=(e,t,n)=>t in e?Ru(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dn=(e,t)=>{for(var n in t||(t={}))Uu.call(t,n)&&En(e,n,t[n]);if(Cn)for(var n of Cn(t))Bu.call(t,n)&&En(e,n,t[n]);return e},Fu=(e,t)=>Nu(e,ju(t));function In(e,t,n={}){var r,a;const s=(r=n.direction)!=null?r:"bottom",i=ie(Ot(e,Fu(Dn({},n),{offset:Dn({[s]:(a=n.distance)!=null?a:0},n.offset)})));X(()=>i.arrivedState[s],async o=>{var l,u;if(o){const d=he(e),h={height:(l=d==null?void 0:d.scrollHeight)!=null?l:0,width:(u=d==null?void 0:d.scrollWidth)!=null?u:0};await t(i),n.preserveScrollPosition&&d&&$e(()=>{d.scrollTo({top:d.scrollHeight-h.height,left:d.scrollWidth-h.width})})}})}ce.mounted+"";function An(e,t,n={}){const{root:r,rootMargin:a="0px",threshold:s=.1,window:i=Ce}=n,o=br(()=>i&&"IntersectionObserver"in i);let l=Te;const u=o.value?X(()=>({el:ae(e),root:ae(r)}),({el:h,root:v})=>{if(l(),!h)return;const p=new IntersectionObserver(t,{root:v,rootMargin:a,threshold:s});p.observe(h),l=()=>{p.disconnect(),l=Te}},{immediate:!0,flush:"post"}):Te,d=()=>{l(),u()};return He(d),{isSupported:o,stop:d}}ce.mounted+"";It({name:"UsePointerLock",props:["as"],setup(e,{slots:t}){const n=A(),r=ie(pu(n));return()=>{if(t.default)return Un(e.as||"div",{ref:n},t.default(r))}}});var Hu=Object.defineProperty,Vu=Object.defineProperties,Wu=Object.getOwnPropertyDescriptors,Pn=Object.getOwnPropertySymbols,zu=Object.prototype.hasOwnProperty,qu=Object.prototype.propertyIsEnumerable,Ln=(e,t,n)=>t in e?Hu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yu=(e,t)=>{for(var n in t||(t={}))zu.call(t,n)&&Ln(e,n,t[n]);if(Pn)for(var n of Pn(t))qu.call(t,n)&&Ln(e,n,t[n]);return e},Qu=(e,t)=>Vu(e,Wu(t));ce.mounted+"";function wr(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll")return!0;{const n=e.parentNode;return!n||n.tagName==="BODY"?!1:wr(n)}}function Gu(e){const t=e||window.event,n=t.target;return wr(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}function Ku(e,t=!1){const n=A(t);let r=null,a;X(Ar(e),o=>{if(o){const l=o;a=l.style.overflow,n.value&&(l.style.overflow="hidden")}},{immediate:!0});const s=()=>{const o=he(e);!o||n.value||(Yt&&(r=oe(o,"touchmove",l=>{Gu(l)},{passive:!1})),o.style.overflow="hidden",n.value=!0)},i=()=>{const o=he(e);!o||!n.value||(Yt&&(r==null||r()),o.style.overflow=a,n.value=!1)};return He(i),N({get(){return n.value},set(o){o?s():i()}})}const Xu=()=>{let e=!1;const t=A(!1);return(n,r)=>{if(t.value=r.value,e)return;e=!0;const a=Ku(n,r.value);X(t,s=>a.value=s)}};Xu();const Ju=It({components:{AtDatePicker:zr,AtDateAction:qr,OnClickOutside:_u,NPopover:Ct},props:{modelValue:{type:[Date,String]},placeholder:{type:String,default:"date"},acceptRecurrence:{type:Boolean,default:!1},schedule:{type:Object,default(){return{}}},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":Date},setup(e,{emit:t}){const n=ie({isOpen:!1,hasError:!1,shortcuts:[{text:"Today",value:new Date},{text:"Tomorrow",value:(()=>{const k=new Date;return k.setTime(k.getTime()+864e5),k})()},{text:"Next week",value:(()=>{const k=new Date;return k.setTime(k.getTime()+6048e5),k})()}]}),r=A(null),{humanDate:a,getDateFromString:s}=rt(r);X(()=>e.modelValue,k=>{r.value=typeof k=="string"?s(k):k},{immediate:!0});const i=()=>{t("update:modelValue",r.value)},o=A(null),l=()=>{e.disabled||(n.isOpen=!n.isOpen)};we(()=>{o.tabIndex=-1});const u=k=>{k.path.find(O=>O.classList&&O.classList.contains("el-popper"))||(n.isOpen=!1,h.value=!1)},d=k=>{h.value=!1,t("update:schedule",k)},h=A(!1),v=N(()=>e.schedule&&e.schedule.frequency),p=N(()=>v.value?"Repeat: "+e.schedule.frequency:"No repeat");return{...ue(n),date:r,humanDate:a,input:o,emitDate:i,focusInput:l,closeModal:u,isRecurrenceOpen:h,recurrenceLabel:p,setRecurrence:d,isRecurrent:v}}}),Zu={key:0,class:"mr-1 text-green-400 fa fa-redo"},ed={key:1,class:"mr-1 fa fa-calendar"},td={class:"inline-block w-full text-sm font-bold text-left capitalize"},nd={class:"mx-2"},rd={class:"mx-2"};function ad(e,t,n,r,a,s){const i=K("at-date-picker"),o=K("at-date-action"),l=K("recurrence-form"),u=K("el-popover"),d=K("NPopover"),h=K("on-click-outside");return w(),Y(h,{class:"date-select",onTrigger:e.closeModal},{default:I(()=>[R(d,{overlap:!0,trigger:"click",placement:"top-start","popper-class":"tag-select dark:bg-gray-900 dark:text-gray-300",width:310,"show-arrow":!1},{trigger:I(()=>[f("button",{onClick:t[0]||(t[0]=J((...v)=>e.focusInput&&e.focusInput(...v),["stop"])),"data-name":"button",tabindex:0,class:"flex items-center focus:outline-none"},[e.isRecurrent?(w(),$("i",Zu)):(w(),$("i",ed)),f("span",td,B(e.humanDate||e.placeholder),1)])]),default:I(()=>[f("div",null,[R(i,{date:e.date,"onUpdate:date":[t[1]||(t[1]=v=>e.date=v),t[3]||(t[3]=v=>e.emitDate())],"has-error":e.hasError,"onUpdate:hasError":t[2]||(t[2]=v=>e.hasError=v),shortcuts:e.shortcuts,"accept-time":!1,"accept-recurrence":!0},null,8,["date","has-error","shortcuts"]),e.acceptRecurrence?(w(),Y(u,{key:0,visible:e.isRecurrenceOpen,"onUpdate:visible":t[6]||(t[6]=v=>e.isRecurrenceOpen=v),trigger:"manual",placement:"top",width:280},{reference:I(()=>[f("div",nd,[R(o,{onClick:t[4]||(t[4]=v=>e.isRecurrenceOpen=!e.isRecurrenceOpen),class:"focus:outline-none"},{default:I(()=>[te(B(e.recurrenceLabel),1)]),_:1})])]),default:I(()=>[R(l,{"due-date":e.date,schedule:e.schedule,onCancel:t[5]||(t[5]=v=>e.isRecurrenceOpen=!1),onDone:e.setRecurrence},null,8,["due-date","schedule","onDone"])]),_:1},8,["visible"])):j("",!0),f("div",rd,[R(o,{onClick:t[7]||(t[7]=v=>e.isOpen=!1),class:"focus:outline-none"},{default:I(()=>[te(" Done ")]),_:1})])])]),_:1})]),_:1},8,["onTrigger"])}const sd=Me(Ju,[["render",ad]]);const od={components:{ListContainer:Ri,PersonSelect:Rl,TagsSelect:mu,DateSelect:sd},props:{task:Object,type:String,currentTask:{type:Object,default:()=>({})},handleMode:Boolean,showSelect:Boolean,showControls:Boolean,currentTimer:Object,isItemAsHandler:Boolean,isCompact:Boolean,allowRun:Boolean,allowUpdate:Boolean},emits:{deleted:Object,selected:Object,edited:Object,up:Object,down:Object,undo:Object,done:Object,clone:Object,updated:Array,"toggle-timer":Object},setup(e,{emit:t}){const{task:n,currentTask:r,currentTimer:a}=ue(e),s=ie({timeTrackedLabel:N(()=>n.value.duration_ms||"00:00:00"),typeColor:N(()=>{const S={todo:`bg-green-100 dark:bg-gray-600 dark:border-gray-500 ${n.value.is_key?"text-gray-100 ":"text-green-500"}`,schedule:"bg-blue-100 dark:bg-gray-600 dark:border-gray-500 dark:text-blue-500 text-blue-500",delegate:"bg-yellow-100 dark:bg-gray-600 dark:border-gray-500 dark:text-yellow-400 text-yellow-500",delete:"bg-red-100 dark:bg-gray-600 dark:border-gray-500 text-red-400",backlog:"bg-gray-100 text-gray-500 dark:bg-gray-600 dark:border-gray-500 dark:text-gray-300"};return S[e.type]||S.todo}),keyStyles:N(()=>n.value.is_key&&e.type=="todo"?"border-green-300 border-2 bg-green-500 text-white":""),isDisabled:N(()=>a.value&&a.value.task_uid),dateStates:N(()=>{const{formatDate:S}=rt(),O={normal:{color:"text-gray-400",title:"due date"},due:{color:"text-blue-400",title:"due to today"},overdue:{color:"text-red-400",title:"Overdue"}};let P="normal";return n.value.due_date==S()?P="due":n.value.due_date&&n.value.due_date<S()&&(P="overdue"),O[P]}),isExpanded:!1,processing:!1});n.value.contacts=n.value.contacts||[];const i=S=>{switch(S){case"delete":t("deleted",n);break;case"edit":t("edited",n);break;case"up":t("up",n);break;case"down":t("down",n);break;case"done":t("done",n);break;case"undo":t("undo",n);break;case"clone":t("clone",n);break;case"toggle-key":t("toggle-key",n)}},o=()=>{s.isExpanded=!s.isExpanded},l=()=>{ElNotification({title:"changed"})},u=A([]),d=()=>{},h=()=>{},v=A([]),p=()=>{},k=()=>{};return{...ue(s),handleCommand:i,toggleExpand:o,updateItems:l,tags:u,createTag:d,addTag:h,contacts:v,createContact:p,selectContact:k}}},Re=e=>(et("data-v-9d172d75"),e=e(),tt(),e),id={class:"flex justify-between"},ld={class:"flex items-start text-xs md:items-center"},ud={key:0,class:"flex items-center mr-2"},dd={class:"m-0 text-sm text-left cursor-pointer task-item__title"},cd={class:"flex items-start task-item__controls md:items-center"},fd={class:"flex-wrap items-center justify-end mr-1 md:flex"},md=Re(()=>f("i",{class:"mr-1 fa fa-trash"},null,-1)),hd=[md],vd=Re(()=>f("i",{class:"fas fa-undo"},null,-1)),gd=["title"],pd=Re(()=>f("i",{class:"fa fa-ellipsis-v"},null,-1)),yd=[pd],bd=Re(()=>f("i",{class:"fa fa-align-left"},null,-1)),wd=[bd],kd=Re(()=>f("i",{class:"mr-2 fa fa-list-ul"},null,-1)),xd={class:"font-bold"},_d=Re(()=>f("div",{class:"flex justify-end w-full"},null,-1)),Sd={class:"task-item__body"},Td=["innerHTML"],$d={class:"mt-5 task-item__checklist"};function Md(e,t,n,r,a,s){var k;const i=K("person-select"),o=K("time-tracker-button"),l=K("date-select"),u=K("el-dropdown-item"),d=K("el-dropdown-menu"),h=K("el-dropdown"),v=K("ListContainer"),p=K("el-collapse-transition");return w(),$("div",{class:L(["items-center px-4 mb-2 transition-all bg-white border-2 border-gray-200 rounded-md cursor-pointer task-item dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 hover:border-green-200",{"py-3 shadow-md ":!n.isCompact,"py-2":n.isCompact}]),onClick:t[16]||(t[16]=S=>e.$emit("selected",n.task)),onDblclick:t[17]||(t[17]=J(S=>e.$emit("edited",n.task),["prevent"]))},[f("div",id,[f("div",ld,[n.showSelect?(w(),$("div",ud,[re(f("input",{type:"checkbox",class:"mr-4 form-control-check checkbox-done","onUpdate:modelValue":t[0]||(t[0]=S=>n.task.done=S),onClick:t[1]||(t[1]=J(S=>e.$emit("done",n.task),["stop"]))},null,512),[[Fe,n.task.done]])])):(w(),$("div",{key:1,class:L(["px-2 py-1 mr-3 border-2 border-transparent rounded-md",[e.typeColor,e.keyStyles]])},[f("i",{class:L([n.task.is_key?"fa fa-fire":"fa fa-sticky-note"])},null,2)],2)),f("h4",dd,B(n.task.title),1)]),f("div",cd,[f("div",fd,[n.type=="delegate"?(w(),Y(i,{key:0,modelValue:n.task.contacts,"onUpdate:modelValue":[t[2]||(t[2]=S=>n.task.contacts=S),t[3]||(t[3]=S=>e.$emit("updated",n.task))],items:r.contacts,multiple:!0,onSelected:e.addContact,onAdded:r.createContact},null,8,["modelValue","items","onSelected","onAdded"])):n.type=="delete"?(w(),$("div",{key:1,class:"mx-2 text-sm text-gray-400 cursor-pointer hover:text-red-400 md:text-md md:text-base",onClick:t[4]||(t[4]=S=>e.$emit("deleted",n.task)),title:"Delete"},hd)):j("",!0),R(o,{"allow-run":n.allowRun,"default-value":e.timeTrackedLabel,currentTimer:n.currentTimer,"is-current":n.currentTask.uid==n.task.uid,task:n.currentTask,onToggleTimer:t[5]||(t[5]=S=>e.$emit("toggle-timer",n.task))},null,8,["allow-run","default-value","currentTimer","is-current","task"]),f("div",null,[n.task.due_date||n.type=="schedule"?(w(),Y(l,{key:0,modelValue:n.task.due_date,"onUpdate:modelValue":[t[6]||(t[6]=S=>n.task.due_date=S),t[9]||(t[9]=S=>e.$emit("updated",{...n.task,due_date:S}))],schedule:n.task.schedule,"onUpdate:schedule":[t[7]||(t[7]=S=>n.task.schedule=S),t[8]||(t[8]=S=>e.$emit("updated",{...n.task,schedule:S}))],disabled:!n.allowUpdate,class:L(e.dateStates.color),title:e.dateStates.title,"accept-recurrence":!0,placeholder:"due date"},null,8,["modelValue","schedule","disabled","class","title"])):j("",!0)]),n.task.done?(w(),$("button",{key:2,class:"h-6 px-2 ml-2 text-xs text-white transition-colors bg-gray-600 rounded-md hover:bg-gray-500",onClick:t[10]||(t[10]=J(S=>e.$emit("undo",n.task),["stop"]))},[vd,te(" Undo ")])):j("",!0)]),n.showControls?(w(),Y(h,{key:0,trigger:"click",onCommand:r.handleCommand,disabled:e.isDisabled,onClick:t[12]||(t[12]=J(()=>{},["stop"]))},{dropdown:I(()=>[R(d,null,{default:I(()=>[R(u,{command:"edit",icon:"el-icon-edit"},{default:I(()=>[te("Edit")]),_:1}),R(u,{command:"delete",icon:"el-icon-delete"},{default:I(()=>[te("Delete ")]),_:1}),n.task.done?(w(),Y(u,{key:1,command:"undo",icon:"el-icon-refresh-left"},{default:I(()=>[te(" undo ")]),_:1})):(w(),Y(u,{key:0,command:"done",icon:"el-icon-check"},{default:I(()=>[te(" Mark as done ")]),_:1})),R(u,{command:"clone",icon:"el-icon-document-copy"},{default:I(()=>[te(" Duplicate ")]),_:1}),n.task.matrix=="todo"?(w(),Y(u,{key:2,command:"toggle-key",icon:"el-icon-s-flag"},{default:I(()=>[te(" Key task ")]),_:1})):j("",!0),n.task.matrix=="schedule"?(w(),Y(u,{key:3,command:"up",icon:"el-icon-arrow-left"},{default:I(()=>[te("Move to todo")]),_:1})):j("",!0),n.task.matrix=="todo"?(w(),Y(u,{key:4,command:"down",icon:"el-icon-arrow-right"},{default:I(()=>[te("Move to schedule")]),_:1})):j("",!0)]),_:1})]),default:I(()=>[f("div",{class:"px-2 py-1 text-sm text-gray-400 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 dark:hover:text-gray-50 focus:outline-none hover:text-gray-600",title:e.isDisabled?"Can updates tasks when timer is running":"",onClick:t[11]||(t[11]=J(()=>{},["stop"]))},yd,8,gd)]),_:1},8,["onCommand","disabled"])):j("",!0)])]),n.isCompact?j("",!0):(w(),$("div",{key:0,class:L(["flex items-center mt-1 text-xs",{"justify-between":n.task.due_date}])},[n.task.description?(w(),$("button",{key:0,title:"Description",class:"px-2 py-1 rounded-md hover:bg-gray-200 focus:outline-none",onClick:t[13]||(t[13]=J((...S)=>r.toggleExpand&&r.toggleExpand(...S),["stop"]))},wd)):j("",!0),(k=n.task.checklist)!=null&&k.length?(w(),$("button",{key:1,title:"Checklist",class:"flex items-center w-20 px-2 py-1 rounded-md hover:bg-gray-200 focus:outline-none",onClick:t[14]||(t[14]=J((...S)=>r.toggleExpand&&r.toggleExpand(...S),["stop"]))},[kd,f("div",null,[f("span",xd,B(n.task.checklist.filter(S=>S.done).length),1),te(" / "+B(n.task.checklist.length),1)])])):j("",!0),_d],2)),R(p,null,{default:I(()=>[re(f("div",Sd,[f("div",{class:L(["pt-2 text-left whitespace-pre-line task-item__description",{"text-gray-400 text-sm":!n.task.description}]),placeholder:"Add a short description",innerHTML:n.task.description},null,10,Td),f("div",$d,[R(v,{items:n.task.checklist,"onUpdate:items":t[15]||(t[15]=S=>n.task.checklist=S),task:n.task,onUpdated:r.updateItems},null,8,["items","task","onUpdated"])])],512),[[Bn,e.isExpanded]])]),_:1})],34)}const Od=Me(od,[["render",Md],["__scopeId","data-v-9d172d75"]]),Cd={},Ed={class:"octicon octicon-unfold link-gray mr-1","aria-label":"Expand",viewBox:"0 0 16 16",version:"1.1",width:"16",height:"16",role:"img"},Dd=f("path",{"fill-rule":"evenodd",d:"M8.177.677l2.896 2.896a.25.25 0 01-.177.427H8.75v1.25a.75.75 0 01-1.5 0V4H5.104a.25.25 0 01-.177-.427L7.823.677a.25.25 0 01.354 0zM7.25 10.75a.75.75 0 011.5 0V12h2.146a.25.25 0 01.177.427l-2.896 2.896a.25.25 0 01-.354 0l-2.896-2.896A.25.25 0 015.104 12H7.25v-1.25zm-5-2a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM6 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 016 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM12 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 0112 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5z"},null,-1),Id=[Dd];function Ad(e,t){return w(),$("svg",Ed,Id)}const Pd=Me(Cd,[["render",Ad]]),Ld={},Rd={class:"octicon octicon-fold link-gray mr-1","aria-label":"Collapse",viewBox:"0 0 16 16",version:"1.1",width:"16",height:"16",role:"img"},Nd=f("path",{"fill-rule":"evenodd",d:"M10.896 2H8.75V.75a.75.75 0 00-1.5 0V2H5.104a.25.25 0 00-.177.427l2.896 2.896a.25.25 0 00.354 0l2.896-2.896A.25.25 0 0010.896 2zM8.75 15.25a.75.75 0 01-1.5 0V14H5.104a.25.25 0 01-.177-.427l2.896-2.896a.25.25 0 01.354 0l2.896 2.896a.25.25 0 01-.177.427H8.75v1.25zm-6.5-6.5a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM6 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 016 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM12 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 0112 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5z"},null,-1),jd=[Nd];function Ud(e,t){return w(),$("svg",Rd,jd)}const Bd=Me(Ld,[["render",Ud]]);const Fd={class:"task-group"},Hd={key:0,class:"flex items-center justify-between cursor-pointer"},Vd={class:"flex"},Wd={class:"mr-2 text-sm font-bold text-gray-400 dark:text-gray-300"},Rn={__name:"TaskGroup",props:{tasks:{type:Array,default(){return[]}},isQuadrant:Boolean,color:String,title:String,type:String,icons:Array,handleMode:Boolean,showControls:Boolean,showSelect:Boolean,currentTask:{type:Object,default(){return{}}},currentTimer:Object,showTitle:{type:Boolean,default:!0},maxHeight:{default:340,type:Number},taskClass:{type:String},dragClass:{type:String},placeholder:String,isItemAsHandler:Boolean,allowUpdate:{type:Boolean,default:!0},allowRun:Boolean,isCompact:Boolean,useExternalDone:Boolean},emits:{deleted:Object,selected:Object,edited:Object,up:Object,down:Object,move:Object,change:Object,undo:Object,done:Object,"toggle-timer":Object},setup(e,{emit:t}){const n=e;A(!1);const r=A(null);we(()=>{n.maxHeight&&r.value&&(r.value.style.setProperty("--max-height",`${n.maxHeight}px`),n.placeholder&&r.value.style.setProperty("--placeholder",`"${n.placeholder}"`))});const{tasks:a,showSelect:s,currentTask:i,currentTimer:o,isItemAsHandler:l,handleMode:u}=ue(n),{width:d}=ua(),h=N(()=>d.value>758&&(u.value||l.value)?null:".handle"),v=N(()=>d.value<758&&l.value||u.value),p=N(()=>{const c={todo:{content:"Important & Urgent Tasks"},schedule:{content:"Important but not urgent"},delegate:{content:"Urgent but not important"},delete:{content:"not Important & not urgent"}};return c[n.type]?c[n.type].content:""}),k=A(!0),S=()=>{k.value=!k.value},O=(c,b)=>{t("move",c,b)},P=(c,b)=>{t("change",c,b)},F=()=>{},D=()=>{},V=N(()=>a.value.filter(c=>c.is_key).length),W=c=>{c.tracks=[],c.commit_date=null,c.done=!1,delete c.duration_ms,t("undo",c)},{formatDate:H}=rt(),x=async c=>{let b=!0,g=[];if(c.checklist&&(g=c.checklist.filter(_=>!_.done)),g.length&&(b=await ElMessageBox.confirm(`There are ${g.length} unresolved item(s)`,"Are you sure?",{confirmButtonText:"Mark all as done",cancelButtonText:"Cancel"}).then(()=>!0),b&&g.forEach(_=>_.done=!0)),!!b){if(c.commit_date=H(),c.done=!0,n.useExternalDone){t("done",c);return}F().then(()=>{t("done",c)})}},M=c=>{const b={...c};b.uid=null,b.title+=" copy",b.duration_ms=null,b.duration=0,b.order=0,b.track=[],b.copied_from=c.uid,b.is_copy=!0,D().then(()=>{ElNotification({message:"Task Copied"}),t("clone",b)})},m=c=>{const b={...c};b.track=[]},y=c=>{!c.is_key&&V.value<3?(c.is_key=!0,F({uid:c.uid,is_key:c.is_key}),ElNotification({message:"Marked as key"})):c.is_key&&(c.is_key=!1,F({uid:c.uid,is_key:c.is_key}))};return(c,b)=>{const g=K("el-collapse-transition");return w(),$("div",Fd,[e.showTitle?(w(),$("div",Hd,[f("h4",{class:L(["block mb-2 font-bold",[e.isQuadrant?`font-bold ${e.color} capitalize`:""]])},B(e.title)+" ("+B(T(a).length)+") ",3),f("div",Vd,[f("small",Wd,B(T(p)),1),f("div",{onClick:S},[k.value?(w(),Y(Bd,{key:1,class:"fill-current dark:text-gray-50"})):(w(),Y(Pd,{key:0,class:"fill-current dark:text-gray-50"}))])])])):j("",!0),ye(c.$slots,"addForm"),ye(c.$slots,"content",{},()=>[R(g,null,{default:I(()=>[re(f("div",{class:"w-full list-group ic-scroller",ref_key:"listGroup",ref:r},[R(T(nt),{class:L(["dragArea",{empty:!T(a).length,[e.type]:!0,[e.dragClass]:!0}]),list:T(a),handle:T(h),group:{name:e.type,pull:!0,put:!0},onMove:O,onChange:b[0]||(b[0]=_=>P(_,e.type))},{default:I(()=>[(w(!0),$(Z,null,ee(T(a),_=>(w(),Y(Od,{key:_,task:_,type:e.type,"handle-mode":T(v),icons:e.icons,"show-select":T(s),"show-controls":e.showControls,"current-task":T(i),"current-timer":T(o),"is-item-as-handler":T(l),"is-compact":e.isCompact,class:L(e.taskClass),"allow-run":e.allowRun,"allow-update":e.allowUpdate,onToggleKey:C=>y(_),onToggleTimer:C=>t("toggle-timer",_),onSelected:C=>t("selected",_),onDeleted:C=>t("deleted",_),onUpdated:m,onEdited:C=>t("edited",_),onUndo:C=>W(_),onDone:C=>x(_),onClone:C=>M(_),onUp:C=>t("up",_),onDown:C=>t("down",_)},null,8,["task","type","handle-mode","icons","show-select","show-controls","current-task","current-timer","is-item-as-handler","is-compact","class","allow-run","allow-update","onToggleKey","onToggleTimer","onSelected","onDeleted","onEdited","onUndo","onDone","onClone","onUp","onDown"]))),128))]),_:1},8,["class","list","handle","group"]),T(a).length?j("",!0):ye(c.$slots,"empty",{key:0})],512),[[Bn,k.value]])]),_:3})])])}}},zd={class:"mb-20"},qd={class:"w-full md:block lg:flex matrix"},Yd={class:"mb-4 quick__add"},Qd={class:"mb-4 quick__add"},Gd={key:0,class:"w-full px-5 py-4 bg-white rounded-md shadow-md"},Kd=f("div",{class:"mb-2 font-bold text-left text-gray-500"},[te(" Timeline: "),f("span",{class:"text-sm font-normal"},"Track the number of days since the task was created until today")],-1),Xd={class:"flex items-center h-full mx-2 text-left"},Jd={class:"flex items-center"},Zd=f("label",{class:"mr-2"}," Sort By:",-1),ec={__name:"MatrixBoard",props:{mode:{type:String,default:"matrix"},showHelp:Boolean,showUncategorized:{type:Boolean,default:!0},search:String,user:String,allowUpdate:{type:Boolean,default:!0},allowAdd:{type:Boolean,default:!0},kanbanData:{type:Object,required:!0},stages:{type:Array,required:!0},fields:{type:Array,required:!0}},emits:[],setup(e,{emit:t}){const n=e,r=N(()=>n.mode=="backlog"),a=N(()=>n.mode.includes("matrix")),s=N(()=>n.mode=="lineup"),i=c=>s&&["todo","schedule"].includes(c),o=ie({tasks:[],matrix:["todo","schedule","delegate","delete"],quadrants:{todo:{color:"text-green-400",border:"border-green-400",background:"bg-green-400",tasks:[]},schedule:{color:"text-blue-400",border:"border-blue-400",background:"bg-blue-400",tasks:[]},delegate:{color:"text-yellow-400",border:"border-yellow-400",background:"bg-yellow-400",tasks:[]},delete:{color:"text-red-400",border:"border-red-400",background:"bg-red-400",tasks:[]},backlog:{background:"bg-gray-400",color:"",tasks:[]}},isTaskModalOpen:!1,isTimeLine:N(()=>n.mode=="timeline")}),{search:l}=ue(n),{tasks:u}=ue(o),{filteredList:d}=pr(l,u),h=ie({sortBy:{name:"matrix",label:"Matrix"},sortFields:[{name:"matrix",label:"Matrix"},{name:"diff",label:"Duration"},{name:"order",label:"Order"}]}),v=N(()=>{const c=d.value.map(b=>{var _;b.start=b.created_at.toDate(),b.end=new Date;const g=b.matrix||"backlog";return b.colorClass=(_=o.quadrants[g])==null?void 0:_.background,b.diff=differenceInCalendarDays(b.start,b.end),b});return orderBy(c,h.sortBy.name)}),p=c=>{var b;return(b=o.quadrants[c])==null?void 0:b.color},{toISO:k}=rt(),S=()=>{},O=(c="default")=>{const b={default:o.tasks,overdue:o.tasks.filter(g=>g.due_date&&g.due_date<new Date),stale:o.tasks.filter(g=>g.created_at&&differenceInCalendarDays(new Date,g.created_at.toDate())>14)};return b[c]||b.default};X(()=>[o.tasks,n.mode],()=>{Object.values(o.quadrants).forEach(g=>g.tasks=[]);const c=n.mode.slice(n.mode.search(":")+1);O(c).forEach(g=>{o.quadrants[g.matrix]&&!o.quadrants[g.matrix].tasks?o.quadrants[g.matrix].tasks=[g]:o.quadrants[g.matrix]&&o.quadrants[g.matrix].tasks.push(g)})});const P=c=>n.kanbanData[c].items,F=c=>Math.max(...c.map(b=>Number(b.order||0)))+1,D=c=>{c.order=F(o.quadrants[c.matrix||"backlog"].tasks);const b={...c};b.due_date=k(b.due_date),t("save",b)},V=async c=>{t("delete",c)},W=c=>{const b=o.quadrants[c.matrix];b.tasks=b.tasks.filter(g=>c.uid!=g.uid)},H=async(c,b)=>{const g=c.matrix;c.matrix=b;const _=o.quadrants;t("update",c),_[g].tasks=_[g].tasks.filter(C=>c.uid!=C.uid)},x=(c,b)=>{if(c.added){const g=n.kanbanData[b];let _=c.added.element.fields.find(C=>C.field_id==g.attributes.field_id);_?_.value=g.attributes.name:(_=this.fields.find(C=>C.id==g.attributes.field_id),c.added.element.fields.push({field_id:_.id,field_name:_.name,value:g.attributes.name})),c.added.element.matrix=b,c.added.element.order=c.added.newIndex,t("saved",c.added.element),M(b)}c.moved&&M(b)},M=c=>{const b=P(c);return S(b.map((g,_)=>(g.order=_,g)))},m=A({}),y=c=>{m.value=c,o.isTaskModalOpen=!1,o.isTaskModalOpen=!0};return(c,b)=>{const g=K("quick-add"),_=K("matrix-help-view"),C=K("QuickAdd"),E=K("jet-select");return w(),$("div",zd,[f("div",qd,[T(a)||T(s)?(w(),$("div",{key:0,class:L(["grid md:grid-cols-2 md:gap-10",{"w-full":T(s),"sm:w-full lg:w-full":T(a)&&!e.showUncategorized,"sm:w-full md:8/12":T(a)&&e.showUncategorized}])},[(w(!0),$(Z,null,ee(o.matrix,Q=>(w(),$("div",{class:L(["w-full pt-3 mb-10 md:mb-0 ic-scroller",[e.showHelp&&(!T(s)||i(Q))?`border-2 ${o.quadrants[Q].border} border-dashed pr-5 pl-3`:""]]),key:Q},[!T(s)||i(Q)?(w(),Y(Rn,{key:0,title:Q,type:Q,search:T(l),tasks:P(Q),color:o.quadrants[Q].color,"show-controls":e.allowUpdate,"allow-update":e.allowUpdate,"allow-move":!1,"handle-mode":!0,onDone:W,onUndone:W,onDeleted:V,onEdited:y,onChange:x,onDown:b[0]||(b[0]=ne=>H(ne,"schedule")),onUp:b[1]||(b[1]=ne=>H(ne,"todo")),onMove:c.onMove,"is-quadrant":!0},Qt({_:2},[!e.showHelp&&e.allowAdd?{name:"addForm",fn:I(()=>[f("div",Yd,[R(g,{onSaved:D,"allow-edit":!0,type:Q},null,8,["type"])])]),key:"0"}:void 0,e.showHelp?{name:"content",fn:I(()=>[R(_,{matrix:Q},null,8,["matrix"])]),key:"1"}:void 0]),1032,["title","type","search","tasks","color","show-controls","allow-update","onMove"])):j("",!0)],2))),128))],2)):j("",!0),T(r)||e.showUncategorized&&!o.isTimeLine?(w(),$("div",{key:1,class:L([{"md:w-full":T(r),"md:w-4/12 md:ml-20":T(a)&&e.showUncategorized,"md:hidden":T(a)&&!e.showUncategorized,"border-2 border-gray-400 border-dashed pr-5 pl-5":e.showHelp},"pt-3"])},[R(Rn,{title:"No prioritized",type:"backlog",color:"text-gray-400",tasks:P("backlog"),"handle-mode":e.allowUpdate,"is-quadrant":!0,"show-controls":e.allowUpdate,"max-height":T(r)?0:350,onDone:W,onUndone:W,onDeleted:V,onEdited:y,onChange:x,onMove:c.onMove},Qt({_:2},[!e.showHelp&&e.allowAdd?{name:"addForm",fn:I(()=>[f("div",Qd,[R(C,{onSaved:D,"allow-edit":!0,type:"backlog"})])]),key:"0"}:void 0,e.showHelp?{name:"content",fn:I(()=>[R(_,{matrix:"backlog"})]),key:"1"}:void 0]),1032,["tasks","handle-mode","show-controls","max-height","onMove"])],2)):j("",!0)]),e.mode=="timeline"?(w(),$("div",Gd,[Kd,R(T(ci),{"show-toolbar":!0,tasks:T(v),onTaskClicked:y,"focused-text-class":"text-green-500","marker-bg-class":"bg-green-400"},{description:I(({focusedTextClass:Q,item:ne,differenceInCalendarDays:st})=>[f("div",Xd,[f("span",{class:L(["text-gray-400 capitalize",p(ne.matrix)])},B(ne.matrix)+": ",3),te(" "+B(ne.title)+" ",1),f("span",{class:L(["ml-2 text-sm font-bold",Q])},B(st)+" days ",3)])]),actionsRight:I(()=>[f("div",Jd,[Zd,R(E,{selected:h.sortBy,"onUpdate:selected":b[2]||(b[2]=Q=>h.sortBy=Q),options:h.sortFields,label:"label","key-track":"value",class:"w-32"},null,8,["selected","options"])])]),_:1},8,["tasks"])])):j("",!0)])}}},tc={class:"flex justify-between mr-2"},nc={key:2},rc=["onClick"],ac=["src"],sc={key:1},oc={__name:"BoardTitle",props:{board:{type:Object,required:!0},automations:{type:Array,default:()=>[]}},emits:["saved"],setup(e,{emit:t}){const n=e,r=A();function a(){r.value=!r.value,$e(()=>{var o;(o=document.querySelector("#board-name"))==null||o.focus()})}const s=A(n.board.name),i=o=>{if(s.value!==n.board.name){const l={...n.board,name:s.value};t("saved",l)}o&&a()};return(o,l)=>(w(),$("div",tc,[r.value?re((w(),$("input",{key:1,"onUpdate:modelValue":l[1]||(l[1]=u=>s.value=u),id:"board-name",type:"text",class:"inline-block text-2xl font-bold w-full border rounded-md px-2 focus:outline-none focus:border-purple-500",onBlur:l[2]||(l[2]=u=>i(!0)),onKeypress:l[3]||(l[3]=le(u=>i(!0),["enter"]))},null,544)),[[be,s.value]]):(w(),$("span",{key:0,class:"text-3xl font-bold border border-transparent rounded-md hover:border-slate-300 px-2 w-full",onClick:l[0]||(l[0]=u=>a())},B(s.value),1)),e.automations.length?(w(),$("div",nc,[(w(!0),$(Z,null,ee(e.automations,u=>(w(),$("span",{class:"automation",key:`automation-${u.id}`,onClick:d=>t("run-automation",u.id)},[u.service_logo?(w(),$("img",{key:0,src:u.service_logo,class:"automation-logo"},null,8,ac)):(w(),$("div",sc,B(u.name[0]),1))],8,rc))),128))])):j("",!0)]))}};const ic={class:"px-8 pb-24"},lc={class:"flex justify-between board__toolbar"},uc={class:"flex items-center"},dc={class:"w-40"},cc=f("i",{class:"fa fa-eye"},null,-1),fc=[cc],mc=f("i",{class:"fa fa-sort"},null,-1),hc=[mc],vc={class:""},gc={key:2,class:"flex justify-center w-full py-5"},pc=f("i",{class:"fa fa-plus"},null,-1),yc=[pc],bc={__name:"BoardSection",props:{board:{type:Object,required:!0},automations:{type:Array,required:!0},users:{type:Array,required:!0},filters:{type:Object,default(){return{search:"",done:"",sort:""}}}},setup(e){const t=e;Lr("users",t.users);const n={list:{name:"list",title:"List",component:nn,icon:"fa fa-th-list"},matrix:{name:"matrix",title:"Matrix",component:ec,icon:"fa fa-border-all"}},r=ie({createMode:!1,modeSelected:"list",itemToDelete:!1,items:[],comments:[],contacts:[{name:"Jesus Guerrero"}],searchOptions:{search:t.filters.search,done:t.filters.done,sort:t.filters.sort},openedItem:{},isEditMode:!1,isItemModalOpen:!1,isAutomationModalOpen:!1});X(r.searchOptions,Rr.exports.throttle(()=>{let m=p(r.searchOptions);m=Object.keys(m).length?"?"+new URLSearchParams(p(r.searchOptions)):"",me.Inertia.replace(`/boards/${t.board.id}${m}`)},200),{deep:!0,immediate:!0});const a=N(()=>n[r.modeSelected].component),s=N(()=>{const m=t.board.fields.find(y=>y.name=="status");if(t.board.stages.length){const y={};return t.board.labels.forEach(c=>{c.field_id==m.id&&(y[c.name]={id:c.id,fieldId:c.field_id,attributes:c,items:[],newTask:{}})}),t.board.stages.forEach(c=>{c.items.forEach(b=>{y[b[m.name]]?y[b[m.name]].items.push(b):y.backlog.items.push(b)})}),y}return{}});N(()=>Object.values(n).map(m=>m.name));const i=N(()=>t.board.stages.reduce((m,y)=>(m.push(...y.items.filter(c=>c.selected)),m),[]));we(()=>{window.document.onscroll=function(){requestAnimationFrame(()=>{m()})};function m(){document.querySelectorAll(".ic-list").forEach((c,b)=>{const g=c.querySelectorAll(".false-header");window.pageYOffset>=c.offsetTop-60&&window.pageYOffset<=c.offsetTop+c.offsetHeight-157?c.querySelectorAll(".sticky_header").forEach(_=>{_.classList.add("sticky-active"),g.forEach(C=>C.classList.add("active")),_.style.transform=`translate3d(0px, ${window.pageYOffset-c.offsetTop+60}px, 1px)`}):c.querySelectorAll(".sticky_header").forEach(_=>{_.classList.remove("sticky-active"),g.forEach(C=>C.classList.remove("active")),_.style.transform=""})})}});function o(m,y=!0){const c=m.id?"PUT":"POST",b=m.id?`/${m.id}`:"";axios({url:`/items${b}`,method:c,data:m}).then(()=>{y&&me.Inertia.reload({preserveScroll:!0})})}function l(m={},y=!0){const c=m.id?"PUT":"POST",b=m.id?`/${m.id}`:"";return m.board_id=t.board.id,m.name=m.name||`Stage ${t.board.stages.length+1}`,axios({url:`/api/stages${b}`,method:c,data:m}).then(({data:g})=>{y&&me.Inertia.reload({preserveScroll:!0})})}function u(m={},y=!0){const c=m.id?"PUT":"POST",b=m.id?`/${m.id}`:"";return axios({url:`/api/boards${b}`,method:c,data:{name:m.name}}).then(()=>{y&&(me.Inertia.reload({preserveScroll:!0}),t.isEditMode=!1)})}function d(m){return axios({url:`/api/automations/${m}/run`,method:"POST"}).then(({data:y})=>{this.$notify({type:"success",title:"Automation sync",message:"Updated"}),me.Inertia.reload({preserveScroll:!0})})}function h(){t.board.stages.forEach(async(m,y)=>{m.order=y,await l(m,!1)}),me.Inertia.reload({preserveScroll:!0})}function v(){const m={with:"only",only:"","":"with"};r.searchOptions.done=m[r.searchOptions.done]}function p(m){return m?Object.entries(m).reduce((y,[c,b])=>(b&&(y[c]=b),y),{}):{}}function k(m){r.searchOptions.sort==m?r.searchOptions.sort=`-${m}`:r.searchOptions.sort=m}function S(){r.searchOptions.sort=""}function O(m){r.isItemModalOpen=!0,r.openedItem=m}function P(m,y=!0){showConfirm({title:`Deleting ${m.title} task`,content:"Are you sure you want to delete this tasks?",confirmationButtonText:"Yes, delete",confirm:()=>{axios({url:`/items/${m.id}`,method:"delete"}).then(()=>{y&&(this.itemToDelete=!1,this.$inertia.reload({preserveScroll:!0}))})}})}function F(m,y=!0){showConfirm({title:`Deleting ${m.length} tasks`,content:"Are you sure you want to delete these tasks?",confirmationButtonText:"Yes, delete",confirm:()=>{axios({url:"/api/items/bulk/delete",method:"post",data:m.map(c=>c.id)}).then(()=>{me.Inertia.reload({preserveScroll:!0})})}})}const{createMode:D,modeSelected:V,searchOptions:W,openedItem:H,isEditMode:x,isItemModalOpen:M}=ue(r);return(m,y)=>(K("multiselect"),w(),$("div",ic,[f("header",lc,[R(oc,{class:"w-full",board:e.board,onSaved:u,automations:e.automations,onRunAutomation:d},null,8,["board","automations"]),f("div",uc,[f("div",dc,[j("",!0)]),re(f("input",{type:"search",class:"w-48 ml-2 form-input",name:"",id:"","onUpdate:modelValue":y[1]||(y[1]=c=>T(W).search=c),placeholder:"search"},null,512),[[be,T(W).search]]),f("span",{class:L(["ml-2 toolbar-buttons",{active:T(W).done}]),onClick:y[2]||(y[2]=c=>v())},fc,2),f("span",{class:L(["ml-2 toolbar-buttons",{active:T(W).sort}]),onClick:y[3]||(y[3]=c=>S())},hc,2)])]),T(i).length?(w(),Y(Zr,{key:0,"selected-items":T(i),onDeletePressed:y[4]||(y[4]=c=>F(T(i),!0))},null,8,["selected-items"])):j("",!0),f("div",vc,[T(V)=="list"?(w(),Y(T(nt),{key:0,modelValue:e.board.stages,"onUpdate:modelValue":y[5]||(y[5]=c=>e.board.stages=c),handle:".handle",onEnd:h},{default:I(()=>[R(Nr,null,{default:I(()=>[(w(!0),$(Z,null,ee(e.board.stages,c=>(w(),Y(nn,{key:c.name,stage:c,board:e.board,items:c.items,"create-mode":T(D),filters:e.filters,onSort:k,onClearSort:S,onSaved:o,onOpenItem:O,onItemDeleted:P,onStageUpdated:l,class:"mt-10"},null,8,["stage","board","items","create-mode","filters"]))),128))]),_:1})]),_:1},8,["modelValue"])):(w(),Y(Et(T(a)),{key:1,stages:e.board.stages,fields:e.board.fields,"kanban-data":T(s),onSaved:o,class:"flex pt-5"},null,40,["stages","fields","kanban-data"])),T(V)=="list"?(w(),$("div",gc,[f("button",{class:"flex items-center justify-center w-8 h-8 px-2 text-purple-400 border-2 border-purple-400 rounded-full hover:bg-purple-400 hover:text-white",onClick:y[6]||(y[6]=c=>l())},yc)])):j("",!0)]),R(jr,{onCancel:y[7]||(y[7]=c=>M.value=!1),onSaved:y[8]||(y[8]=c=>M.value=!1),"record-data":T(H),"is-open":T(M)},null,8,["record-data","is-open"]),R(Jr,{onCancel:y[9]||(y[9]=c=>r.isAutomationModalOpen=!1),onSaved:y[10]||(y[10]=c=>r.isAutomationModalOpen=!1),"record-data":{},board:e.board,"is-open":r.isAutomationModalOpen},null,8,["board","is-open"])]))}},jc={__name:"Board",props:{board:{type:Object,default(){return{}}},automations:{type:Array,refault(){return[]}},users:{type:Array,refault(){return[]}},filters:{type:Object}},setup(e){return(t,n)=>(w(),Y(kr,{boards:t.boards},{default:I(()=>[R(bc,{class:"pt-12 mx-2 w-full overflow-hidden",board:e.board,users:e.users,automations:e.automations,filters:e.filters},null,8,["board","users","automations","filters"])]),_:1},8,["boards"]))}};export{jc as default};
